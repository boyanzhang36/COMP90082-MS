{"version":3,"sources":["../node_modules/@aws-amplify/ui-components/dist/esm-es5 lazy /^/.*/.entry/.js$/ include: /.entry/.js$/ exclude: /.system/.entry/.js$/ groupOptions: {} namespace object","helpers/data.helpers.ts","services/http.service.ts","services/config.service.ts","components/app.context.ts","components/withContext/withContext.comp.tsx","components/loader/loader.comp.tsx","helpers/pagination.helpers.ts","components/button/button.comp.tsx","components/infiniteLoader/infiniteLoader.comp.tsx","components/pagination/pagination.comp.tsx","components/table/table.comp.tsx","components/cards/cards.comp.tsx","components/formRow/formRow.comp.tsx","components/queryParams/queryParams.comp.tsx","components/popup/popup.comp.tsx","helpers/file.helpers.ts","components/formPopup/formPopup.comp.tsx","components/filterField/filterField.comp.tsx","common/models/states.types.helper.ts","common/models/config.types.helper.ts","components/page/page.comp.tsx","components/navigation/navigation.comp.tsx","components/customStyles/customStyles.comp.tsx","components/aws-exports.js","components/app.tsx","serviceWorker.ts","index.tsx"],"names":["map","webpackAsyncContext","req","__webpack_require__","o","Promise","resolve","then","e","Error","code","ids","id","all","slice","keys","Object","module","exports","dataHelpers","data","dataPath","attr","extractedData","digProps","split","prop","field","type","arrayType","HttpService","baseUrl","unauthorizedRedirectUrl","errorMessageDataPath","requestHeaders","this","url","indexOf","rawData","outputUrl","forEach","key","urlParamName","replace","queryParams","length","replaceParamsInUrl","params","param","name","value","urlReplaceOnly","push","firstSeparator","join","reqUrl","urlIsAbsolute","origUrl","buildUrl","method","toUpperCase","headers","assign","body","undefined","res","errorMessage","json","path","dataAtPath","extractDataByDataPath","status","statusText","redirectUrl","encodeURIComponent","document","location","href","getErrorMessage","responseType","fetch","ok","text","handleError","buildRequest","makeRequest","httpService","HTTPService","endsWith","import","default","getRemoteConfig","config","isValid","configSchema","require","validate","Ajv","allErrors","verbose","compile","firstError","errors","message","console","error","AppContext","React","createContext","activePage","setError","setActivePage","withAppContext","Component","props","Consumer","context","Loader","className","paginationHelpers","page","parseInt","_page","_itemsPerPage","_total","Button","color","children","InfiniteLoader","Pagination","callbacks","pagination","customLabels","previousTitle","previousPageTitle","nextTitle","nextPageTitle","disabled","hasPreviousPage","onClick","previousPage","title","aria-hidden","hasNextPage","nextPage","Table","items","fields","customActions","editLabel","buttons","editItem","deleteLabel","deleteItem","actionColumnHeader","tableColumnHeaders","actions","paginationCallbacks","getNextPage","getPreviousPage","renderTableRow","item","rowIdx","fieldIdx","truncate","origField","origItem","src","alt","label","fieldValue","target","rel","urlLabel","style","backgroundColor","html","htmlCode","dangerouslySetInnerHTML","__html","renderTableCell","put","call","action","idx","icon","delete","renderTableContent","useEffect","clientHeight","window","innerHeight","dataLength","next","hasMore","loader","Cards","renderActions","cardIdx","renderCard","Fragment","renderRow","renderCardSkeleton","duration","startingIndex","Array","from","limit","renderSkeletons","FormRow","direction","showReset","onChange","useState","optionSources","setOptionSources","pageHeaders","addArrayItemLabel","addArrayItem","clearLabel","clearInput","renderArrayItems","originalField","array","itemIdx","inputField","renderFieldInput","fieldName","updatedArray","localValue","splice","removeItemToFieldArray","aria-label","preventDefault","addItemToFieldArray","changeCallback","inputProps","defaultPlaceholder","placeholder","readonly","required","checked","optionSource","a","async","actualMethod","result","optionSourceData","option","valuePath","displayPath","display","toast","loadOptionSourceFromRemote","sortBy","finalOptions","options","sortedOptions","orderBy","placeholders","object","number","valueAsNumber","email","password","accept","file","date","originalName","QueryParams","initialParams","paginationConfig","submitCallback","setQueryParams","submit","formChanged","submitAfterChange","updatedQueryParams","filteredParams","filter","includes","onSubmit","queryParam","portalRoot","getElementById","createElement","setAttribute","append","PortalPopup","el","componentDidMount","appendChild","componentWillUnmount","removeChild","ReactDOM","createPortal","Popup","_handleKeyDown","show","closeCallback","keyCode","closeLabel","closeForm","ref","refCallback","addEventListener","bind","removeEventListener","fileHelpers","fieldIndex","unflatten","FormPopup","getSingleConfig","methodConfig","fieldsCopy","JSON","parse","stringify","loading","setLoading","formFields","setFormFields","finalRawData","setFinalRawData","submitForm","finalObject","includeOriginalFields","formData","FormData","containFiles","isMultipartForm","validationError","checkIfFieldIsObject","fileInput","querySelector","files","firstFile","success","updatedFormFields","dataPathSplit","lookupValue","objToLookIn","pathElem","lookup","initFormFields","FilterField","toLowerCase","isQueryPaginationState","obj","source","isBodyPaginationState","isQueryPagination","isBodyPagination","buildInitQueryParamsAndPaginationState","initQueryParams","initialPagination","descending","find","previous","Page","useParams","useHistory","pageMethods","methods","getAllConfig","getAll","infiniteScroll","getSingle","postConfig","post","putConfig","deleteConfig","addItemLabel","addItem","addItemFormTitle","formTitles","editItemFormTitle","openedPopup","setOpenedPopup","setPagination","setItems","setFilter","openEditPopup","updateItem","openCustomActionPopup","performAction","fetchPageData","isArray","dataTransform","orderedItems","total","newPaginationState","getUpdatedPaginationState","getAllRequest","confirm","updatedParams","remove","submitQueryParams","reset","paramsToUrl","queryState","newState","nextPath","prevPath","countPath","nextActivePage","pages","p","pIdx","parsedParams","QueryString","search","finalQueryParams","decodeURIComponent","extractQueryParams","description","fieldsToFilter","filterable","currentCountFrom","currentCountTo","itemsCount","renderPaginationStateLabel","filteredItems","passFilter","newPage","renderItemsUI","renderPageContent","refreshData","Navigation","isOpened","setIsOpened","to","activeClassName","CustomStyles","cssVars","styles","vars","arr","awsmobile","Amplify","configure","awsExports","defaultAppName","changeFavicon","link","oldLink","head","App","firstLoad","setFirstLoad","setConfig","appName","loadConfig","windowConfig","RESTool","remoteConfig","ConfigService","loadDefaultConfig","favicon","remoteUrl","validateConfig","usernameAlias","slot","hideSignUp","Provider","customStyles","scrollDuration","cosParameter","scrollY","scrollCount","oldTimestamp","performance","now","requestAnimationFrame","step","newTimestamp","Math","PI","scrollTo","round","cos","scrollToTop","exact","component","position","POSITION","TOP_CENTER","autoClose","draggable","Boolean","hostname","match","render","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.8c6ea48a.chunk.js","sourcesContent":["var map = {\n\t\"./amplify-amazon-button_5.entry.js\": [\n\t\t261,\n\t\t5\n\t],\n\t\"./amplify-auth-fields_9.entry.js\": [\n\t\t262,\n\t\t16\n\t],\n\t\"./amplify-authenticator.entry.js\": [\n\t\t263,\n\t\t0,\n\t\t24\n\t],\n\t\"./amplify-button_3.entry.js\": [\n\t\t264,\n\t\t6\n\t],\n\t\"./amplify-chatbot.entry.js\": [\n\t\t265,\n\t\t10\n\t],\n\t\"./amplify-checkbox.entry.js\": [\n\t\t266,\n\t\t25\n\t],\n\t\"./amplify-confirm-sign-in_7.entry.js\": [\n\t\t267,\n\t\t0,\n\t\t26\n\t],\n\t\"./amplify-container.entry.js\": [\n\t\t268,\n\t\t27\n\t],\n\t\"./amplify-federated-buttons_2.entry.js\": [\n\t\t269,\n\t\t7\n\t],\n\t\"./amplify-federated-sign-in.entry.js\": [\n\t\t270,\n\t\t20\n\t],\n\t\"./amplify-form-field_4.entry.js\": [\n\t\t271,\n\t\t28\n\t],\n\t\"./amplify-greetings.entry.js\": [\n\t\t272,\n\t\t8\n\t],\n\t\"./amplify-icon-button.entry.js\": [\n\t\t273,\n\t\t29\n\t],\n\t\"./amplify-icon.entry.js\": [\n\t\t274,\n\t\t21\n\t],\n\t\"./amplify-link.entry.js\": [\n\t\t275,\n\t\t30\n\t],\n\t\"./amplify-nav_2.entry.js\": [\n\t\t276,\n\t\t9\n\t],\n\t\"./amplify-photo-picker.entry.js\": [\n\t\t277,\n\t\t18\n\t],\n\t\"./amplify-picker.entry.js\": [\n\t\t278,\n\t\t19\n\t],\n\t\"./amplify-radio-button_2.entry.js\": [\n\t\t279,\n\t\t0,\n\t\t31\n\t],\n\t\"./amplify-s3-album.entry.js\": [\n\t\t280,\n\t\t11\n\t],\n\t\"./amplify-s3-image-picker.entry.js\": [\n\t\t281,\n\t\t12\n\t],\n\t\"./amplify-s3-image.entry.js\": [\n\t\t282,\n\t\t17\n\t],\n\t\"./amplify-s3-text-picker.entry.js\": [\n\t\t283,\n\t\t13\n\t],\n\t\"./amplify-s3-text.entry.js\": [\n\t\t284,\n\t\t14\n\t],\n\t\"./amplify-select-mfa-type.entry.js\": [\n\t\t285,\n\t\t15\n\t],\n\t\"./amplify-sign-in-button.entry.js\": [\n\t\t286,\n\t\t22\n\t],\n\t\"./amplify-toast.entry.js\": [\n\t\t287,\n\t\t32\n\t],\n\t\"./amplify-tooltip.entry.js\": [\n\t\t288,\n\t\t33\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn Promise.all(ids.slice(1).map(__webpack_require__.e)).then(function() {\n\t\treturn __webpack_require__(id);\n\t});\n}\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = 255;\nmodule.exports = webpackAsyncContext;","import { IConfigInputField } from \"../common/models/config.model\";\r\n\r\nclass DataHelpers {\r\n\r\n  public extractDataByDataPath(data: any, dataPath: string, attr: string | null = null) {\r\n    if (!data || !dataPath) {\r\n      if (attr) {\r\n        return data[attr];\r\n      }\r\n      return data;\r\n    }\r\n\t\r\n    let extractedData: any = data;\r\n    const digProps: string[] = dataPath.split('.');\r\n\r\n    for (let prop of digProps) {\r\n      if (typeof extractedData[prop] !== 'undefined') {\r\n        extractedData = extractedData[prop];\r\n      } else {\r\n        return null;\r\n      }\r\n    }\r\n\r\n    if (typeof extractedData === 'undefined') {\r\n      return null;\r\n    }\r\n\r\n    if (attr) {\r\n      return extractedData[attr];\r\n    }\r\n\r\n    return extractedData;\r\n  }\r\n\r\n  public checkIfFieldIsObject(field: IConfigInputField): boolean {\r\n    if (field.type === 'object') {\r\n      return true;\r\n    }\r\n\r\n    if (field.type === 'array') {\r\n      if (!field.arrayType || field.arrayType === 'object') {\r\n        return true;\r\n      }\r\n    }\r\n\r\n    return false;\r\n  }\r\n\r\n}\r\n\r\nexport const dataHelpers = new DataHelpers();","import { TConfigMethod, IQueryParam } from '../common/models/config.model';\r\nimport { dataHelpers } from '../helpers/data.helpers';\r\n\r\nexport type ResponseType = 'json' | 'text' | 'boolean' | 'status';\r\n\r\nexport interface IFetchParams {\r\n  origUrl: string\r\n  method?: TConfigMethod\r\n  headers?: any\r\n  queryParams?: IQueryParam[]\r\n  rawData?: any\r\n  body?: any\r\n  responseType?: ResponseType\r\n}\r\n\r\nclass HttpService {\r\n  public baseUrl: string;\r\n  public unauthorizedRedirectUrl: string;\r\n  public errorMessageDataPath: string | string[];\r\n  public requestHeaders: any;\r\n\r\n  constructor(baseUrl: string = '', unauthorizedRedirectUrl: string = '', errorMessageDataPath: string = '') {\r\n    this.baseUrl = baseUrl || '';\r\n    this.unauthorizedRedirectUrl = unauthorizedRedirectUrl || '';\r\n    this.errorMessageDataPath = errorMessageDataPath || '';\r\n    this.requestHeaders = {};\r\n  }\r\n\r\n  private urlIsAbsolute(url: string) {\r\n    if (url.indexOf('http') === 0 || url.indexOf('https') === 0) {\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  private replaceParamsInUrl(url: string, rawData?: any): string {\r\n    if (!rawData || typeof rawData !== 'object') {\r\n      return url;\r\n    }\r\n\r\n    let outputUrl = url;\r\n\r\n    Object.keys(rawData).forEach((key) => {\r\n      const urlParamName = `:${key}`;\r\n      outputUrl = outputUrl.replace(urlParamName, rawData[key] as string);\r\n    });\r\n\r\n    return outputUrl;\r\n  }\r\n\r\n  private buildUrl(url: string, queryParams: IQueryParam[] = [], rawData?: any): string {\r\n    if (!queryParams || !queryParams.length) {\r\n      return this.replaceParamsInUrl(url, rawData);\r\n    }\r\n\r\n    let outputUrl = url;\r\n    const params = [];\r\n\r\n    for (let param of queryParams) {\r\n      if (!param.name || typeof param.value === 'undefined') {\r\n        continue;\r\n      }\r\n\r\n      // TODO: Add docs to \"urlReplaceOnly\"\r\n      if (param.urlReplaceOnly) {\r\n        const urlParamName = `:${param.name}`;\r\n        outputUrl = outputUrl.replace(urlParamName, param.value as string);\r\n      } else {\r\n        params.push(`${param.name}=${param.value || ''}`);\r\n      }\r\n    }\r\n\r\n    if (params.length) {\r\n      const firstSeparator = url.indexOf('?') >= 0 ? '&' : '?';\r\n      return outputUrl + firstSeparator + params.join('&');\r\n    }\r\n\r\n    return outputUrl;\r\n  }\r\n\r\n  private buildRequest(params: IFetchParams): { url: string, params: any } {\r\n    const reqUrl: string = this.urlIsAbsolute(params.origUrl) ? params.origUrl : this.baseUrl + params.origUrl;\r\n    const finalUrl: string = this.buildUrl(reqUrl, params.queryParams, params.rawData);\r\n    const requestParams = {\r\n      method: params.method ? params.method.toUpperCase() : 'GET',\r\n      headers: Object.assign({}, this.requestHeaders, params.headers || {}),\r\n      body: params.method === 'post' || params.method === 'put' || params.method === 'patch' ? params.body : undefined\r\n    };\r\n\r\n    return {\r\n      url: finalUrl,\r\n      params: requestParams\r\n    };\r\n  }\r\n\r\n  private async getErrorMessage(res: Response | any): Promise<string> {\r\n    let errorMessage: string = '';\r\n\r\n    try {\r\n      const body = await res.json();\r\n\r\n      for (const path of this.errorMessageDataPath) {\r\n        const dataAtPath = dataHelpers.extractDataByDataPath(body, path);\r\n\r\n        if (dataAtPath) {\r\n          errorMessage = dataAtPath;\r\n        }\r\n      }\r\n    } catch { } // TODO: proper handling of errors (^.^)\r\n\r\n    return errorMessage && errorMessage.length ?\r\n      errorMessage :\r\n      `${res.status} - ${res.statusText || ''}`;\r\n  }\r\n\r\n  private async handleError(res: Response) {\r\n    // In case response status is \"Unauthorized\", redirect to relevant url\r\n    if (res.status === 401 && this.unauthorizedRedirectUrl) {\r\n      const redirectUrl: string = this.unauthorizedRedirectUrl.replace(':returnUrl', encodeURIComponent(document.location.href));\r\n      document.location.href = redirectUrl;\r\n      return;\r\n    }\r\n\r\n    throw new Error(await this.getErrorMessage(res));\r\n  }\r\n\r\n  private async makeRequest(url: string, params: any = {}, responseType: ResponseType = 'json') {\r\n    const res: Response = await fetch(url, Object.assign({}, params, {}));\r\n\r\n    if (res.ok) {\r\n      switch (responseType) {\r\n        case 'json':\r\n          return await res.json();\r\n        case 'text':\r\n          return await res.text();\r\n        case 'boolean':\r\n          return true;\r\n        default:\r\n          return true;\r\n      }\r\n    }\r\n\r\n    await this.handleError(res);\r\n  }\r\n\r\n  public async fetch({ method, origUrl, queryParams, rawData, body, headers, responseType }: IFetchParams) {\r\n    const { url, params } = this.buildRequest({ method, origUrl, queryParams, rawData, body, headers });\r\n    return await this.makeRequest(url, params, responseType);\r\n  }\r\n}\r\n\r\nexport default HttpService;\r\n","import HTTPService from './http.service';\r\nimport { IConfig } from '../common/models/config.model';\r\nimport Ajv from 'ajv';\r\n\r\nconst httpService: HTTPService = new HTTPService();\r\n\r\nclass ConfigService extends HTTPService {\r\n\r\n  public async getRemoteConfig(url: string) {\r\n    if (url.endsWith('.js')) {\r\n      return (await import(/* webpackIgnore: true */url)).default;\r\n    }\r\n    return await httpService.fetch({\r\n      origUrl: url,\r\n    });\r\n  }\r\n\r\n  public async loadDefaultConfig() {\r\n    try {\r\n      return await this.getRemoteConfig('./config.json');\r\n    } catch (e) {\r\n      return (await this.getRemoteConfig('./config.js'));\r\n    }\r\n  }\r\n\r\n  public validateConfig(config: IConfig | null): { isValid: boolean, errorMessage: string | null } {\r\n    if (config === null) {\r\n      return {\r\n        isValid: true,\r\n        errorMessage: null,\r\n      }\r\n    }\r\n    const configSchema = require('../assets/schemas/config.schema.json');\r\n    const ajv = new Ajv({\r\n      allErrors: true,\r\n      verbose: true,\r\n    });\r\n    const validate = ajv.compile(configSchema);\r\n    const isValid = validate(config);\r\n    if (typeof isValid !== 'boolean') {\r\n      throw new Error('Unexpected asynchronous JSON validation');\r\n    }\r\n    if (isValid) {\r\n      return {\r\n        isValid,\r\n        errorMessage: null,\r\n      }\r\n    }\r\n    const firstError = validate.errors ? validate.errors[0] : undefined;\r\n    let errorMessage: string | null = null;\r\n    if (firstError?.message && firstError?.dataPath) {\r\n      errorMessage = `Error parsing configuration at \"${firstError.dataPath}\": ${firstError.message}`\r\n    } else if (firstError?.message) {\r\n      errorMessage = `Error parsing configuration: ${firstError.message}`\r\n    } else if (firstError?.dataPath) {\r\n      errorMessage = `Error parsing configuration at \"${firstError.dataPath}\"`\r\n    } else {\r\n      errorMessage = `Error parsing configuration`;\r\n    }\r\n    console.error(errorMessage);\r\n    console.error('All configuration errors: ', validate.errors);\r\n    return {\r\n      isValid,\r\n      errorMessage,\r\n    };\r\n  }\r\n\r\n}\r\n\r\nexport default new ConfigService();\r\n","import React from 'react';\r\nimport { IConfig, IConfigPage } from '../common/models/config.model';\r\nimport HttpService from '../services/http.service';\r\n\r\nexport interface IAppContext {\r\n  config: IConfig | null\r\n  activePage: IConfigPage | null\r\n  error: string | null\r\n  setError: (error: string | null) => void\r\n  setActivePage: (activePage: IConfigPage | null) => void\r\n  httpService: HttpService\r\n}\r\n\r\nexport const AppContext = React.createContext<IAppContext>({\r\n  config: null,\r\n  activePage: null,\r\n  error: null,\r\n  setError: () => {},\r\n  setActivePage: () => {},\r\n  httpService: new HttpService()\r\n});","import React from 'react';\r\nimport { AppContext } from '../app.context';\r\n\r\nexport const withAppContext = (Component: any) => {\r\n  return (props: any) => (\r\n    <AppContext.Consumer>    \r\n      {(context) => {\r\n        return <Component {...props} context={context} />\r\n      }}\r\n    </AppContext.Consumer>\r\n  );\r\n};","import React from 'react';\r\n\r\nimport './loader.scss';\r\n\r\nexport const Loader = () => {\r\n  return (\r\n    <div className=\"app-loader cp-spinner cp-balls small\"></div>\r\n  );\r\n};","class PaginationHelpers {\r\n  public hasPreviousPage(page: string | number | undefined): boolean {\r\n    if (page === undefined) {\r\n      return false;\r\n    }\r\n\r\n    if (typeof page === 'string') {\r\n      return parseInt(page) > 1;\r\n    }\r\n\r\n    return page > 1;\r\n  }\r\n\r\n  public hasNextPage(_page: string | number, _itemsPerPage: string | number, _total: string | number | undefined): boolean {\r\n    if (_total === undefined) {\r\n      return true;\r\n    }\r\n    const page = typeof _page === 'string' ? parseInt(_page) : _page;\r\n    const itemsPerPage = typeof _itemsPerPage === 'string' ? parseInt(_itemsPerPage) : _itemsPerPage;\r\n    const total = typeof _total === 'string' ? parseInt(_total) : _total;\r\n\r\n    return page * itemsPerPage < total;\r\n  }\r\n}\r\n\r\nexport const paginationHelpers = new PaginationHelpers();","import React from 'react';\r\n\r\nimport './button.scss';\r\n\r\ninterface IProps {\r\n  children: any\r\n  type?: 'submit' | 'button' | 'reset'\r\n  title?: string\r\n  className?: string\r\n  onClick?: (e: any) => void\r\n  color?: 'gray' | 'blue' | 'green' | 'red'\r\n  disabled?: boolean\r\n}\r\n\r\nexport const Button = (props: IProps) => {\r\n  return (\r\n    <button {...props} className={`button ${props.className || ''} ${props.color || ''}`}>{props.children}</button>\r\n  );\r\n};","import React from 'react';\r\n\r\nimport './infiniteLoader.scss';\r\n\r\nexport const InfiniteLoader = () => {\r\n  return (\r\n    <div className=\"app-infinite-loader cp-spinner cp-balls small\"></div>\r\n  );\r\n};","import React from 'react';\r\nimport { ICustomLabels } from '../../common/models/config.model';\r\nimport { IPaginationState } from '../../common/models/states.model';\r\nimport { Button } from '../button/button.comp';\r\n\r\nimport './pagination.scss';\r\n\r\ninterface IProps {\r\n  pagination: IPaginationState\r\n  callbacks: {\r\n    previousPage: () => void,\r\n    nextPage: () => void,\r\n  }\r\n  customLabels?: ICustomLabels\r\n}\r\n\r\nexport const Pagination = ({ callbacks, pagination, customLabels }: IProps) => {\r\n  const previousTitle = customLabels?.pagination?.previousPageTitle || 'Previous page';\r\n  const nextTitle = customLabels?.pagination?.nextPageTitle || 'Next page';\r\n  return (\r\n    <div className=\"pagination-wrapper\">\r\n      <Button disabled={!pagination.hasPreviousPage} onClick={() => callbacks.previousPage()} title={previousTitle}>\r\n        <i className=\"fa fa-arrow-left\" aria-hidden=\"true\"></i>\r\n      </Button>\r\n      <Button disabled={!pagination.hasNextPage} onClick={() => callbacks.nextPage()} title={nextTitle}>\r\n        <i className=\"fa fa-arrow-right\" aria-hidden=\"true\" ></i>\r\n      </Button>\r\n    </div>\r\n  );\r\n};","import React, { useEffect } from 'react';\r\nimport InfiniteScroll from 'react-infinite-scroll-component';\r\n\r\nimport { IConfigDisplayField, IConfigCustomAction, ICustomLabels } from '../../common/models/config.model';\r\nimport { dataHelpers } from '../../helpers/data.helpers';\r\nimport { Button } from '../button/button.comp';\r\nimport { InfiniteLoader } from '../infiniteLoader/infiniteLoader.comp';\r\nimport { IPaginationState } from '../../common/models/states.model';\r\nimport { Pagination } from '../pagination/pagination.comp';\r\n\r\nimport './table.scss';\r\n\r\ninterface IProps {\r\n  items: any[]\r\n  pagination?: IPaginationState\r\n  callbacks: {\r\n    delete: ((item: any) => void) | null\r\n    put: ((item: any) => void) | null\r\n    action: (item: any, action: IConfigCustomAction) => void\r\n    getPreviousPage: (() => void) | null\r\n    getNextPage: (() => void) | null\r\n  }\r\n  fields: IConfigDisplayField[]\r\n  customActions?: IConfigCustomAction[]\r\n  customLabels?: ICustomLabels\r\n}\r\n\r\nexport const Table = ({ items, fields, pagination, callbacks, customActions, customLabels }: IProps) => {\r\n  const editLabel = customLabels?.buttons?.editItem || 'Edit';\r\n  const deleteLabel = customLabels?.buttons?.deleteItem || 'Delete';\r\n  const actionColumnHeader = customLabels?.tableColumnHeaders?.actions || 'Actions';\r\n  const paginationCallbacks = {\r\n    nextPage: callbacks.getNextPage || (() => { return; }),\r\n    previousPage: callbacks.getPreviousPage || (() => { return; }),\r\n  };\r\n\r\n  function renderTableCell(origField: IConfigDisplayField, origItem: any, value: any) {\r\n    if (origField.type === 'boolean') {\r\n      value = value ? true : false;\r\n    }\r\n\r\n    if (value && typeof value === 'object') {\r\n      return 'object';\r\n    }\r\n\r\n    switch (origField.type) {\r\n      case 'text':\r\n        return <span>{value}</span>;\r\n      case 'boolean':\r\n        return <div className={`bool ${value ? 'true' : 'false'}`}></div>;\r\n      case 'image':\r\n        return <img src={value || ''} alt={value || origField.label || origField.name} />;\r\n      case 'url':\r\n        let url: string = origField.url || value || '';\r\n\r\n        // Replace all url vars\r\n        fields.forEach((field) => {\r\n          const fieldValue = dataHelpers.extractDataByDataPath(origItem, field.dataPath, field.name);\r\n          url = url.replace(`:${field.name}`, fieldValue);\r\n        });\r\n\r\n        return <a href={url} target=\"_blank\" rel=\"noopener noreferrer\">{origField.urlLabel || value}</a>;\r\n      case 'colorbox':\r\n        return <div className=\"colorbox\" style={{ backgroundColor: value }}></div>;\r\n      case 'html':\r\n        const htmlCode = origField.htmlCode || '<span>{value}</span>';\r\n        const html =  htmlCode.replace('{value}', value);\r\n        return <div dangerouslySetInnerHTML={{__html: html}}></div>\r\n      default:\r\n        return value;\r\n    }\r\n  }\r\n\r\n  function renderTableRow(item: any, rowIdx: number) {\r\n    return (\r\n      <tr key={`tr_${rowIdx}`}>\r\n        {\r\n          fields.map((field, fieldIdx) => {\r\n            const value = dataHelpers.extractDataByDataPath(item, field.dataPath, field.name);\r\n            return (\r\n              <td className={field.truncate ? 'truncate' : ''} key={`td_${rowIdx}_${fieldIdx}`}>\r\n                {renderTableCell(field, item, value)}\r\n              </td>\r\n            );\r\n          })\r\n        }\r\n        <td>\r\n          <div className=\"actions-wrapper\">\r\n            {\r\n              callbacks.put &&\r\n              <Button onClick={() => callbacks.put?.(item)} title={editLabel}>\r\n                <i className=\"fa fa-pencil-square-o\" aria-hidden=\"true\"></i>\r\n              </Button>\r\n            }\r\n            {\r\n              (customActions && customActions.length > 0) &&\r\n              customActions.map((action, idx) => (\r\n                <Button key={`action_${rowIdx}_${idx}`} onClick={() => callbacks.action(item, action)} title={action.name}>\r\n                  <i className={`fa fa-${action.icon || 'cogs'}`} aria-hidden=\"true\"></i>\r\n                </Button>\r\n              ))\r\n            }\r\n            {\r\n              callbacks.delete &&\r\n              <Button onClick={() => callbacks.delete?.(item)} title={deleteLabel}>\r\n                <i className=\"fa fa-times\" aria-hidden=\"true\"></i>\r\n              </Button>\r\n            }\r\n          </div>\r\n        </td>\r\n      </tr>\r\n    );\r\n  }\r\n\r\n  function renderTableContent() {\r\n    return (\r\n      <table className=\"pure-table\">\r\n        <thead>\r\n          <tr>\r\n            {\r\n              fields.map((field) => {\r\n                return <th key={`th_${field.name}`}>{field.label || field.name}</th>;\r\n              })\r\n            }\r\n            <th>{actionColumnHeader}</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {\r\n            items.map(renderTableRow)\r\n          }\r\n        </tbody>\r\n      </table>\r\n    );\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (\r\n      pagination?.type === 'infinite-scroll'\r\n      && document.body.clientHeight <= window.innerHeight\r\n      && pagination?.hasNextPage\r\n    ) {\r\n      paginationCallbacks.nextPage();\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n\r\n  if (pagination?.type === 'infinite-scroll') {\r\n    return (\r\n      <InfiniteScroll\r\n        dataLength={items.length}\r\n        next={callbacks.getNextPage || (() => null)}\r\n        hasMore={pagination?.hasNextPage || false}\r\n        loader={<InfiniteLoader />}\r\n      >\r\n        {renderTableContent()}\r\n      </InfiniteScroll>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"table-wrapper\">\r\n      {renderTableContent()}\r\n      {\r\n        pagination &&\r\n        pagination.type === 'buttons' &&\r\n        <Pagination\r\n          callbacks={paginationCallbacks}\r\n          pagination={pagination}\r\n          customLabels={customLabels}\r\n        ></Pagination>\r\n      }\r\n    </div >\r\n  );\r\n}\r\n","import React, { useEffect } from 'react';\r\nimport InfiniteScroll from 'react-infinite-scroll-component';\r\nimport Skeleton from 'react-loading-skeleton';\r\n\r\nimport { IConfigDisplayField, IConfigCustomAction, ICustomLabels } from '../../common/models/config.model';\r\nimport { IPaginationState } from '../../common/models/states.model';\r\nimport { dataHelpers } from '../../helpers/data.helpers';\r\nimport { Button } from '../button/button.comp';\r\nimport { Pagination } from '../pagination/pagination.comp';\r\n\r\nimport './cards.scss';\r\n\r\ninterface IProps {\r\n  items: any[]\r\n  pagination?: IPaginationState\r\n  callbacks: {\r\n    delete: ((item: any) => void) | null\r\n    put: ((item: any) => void) | null\r\n    action: (item: any, action: IConfigCustomAction) => void\r\n    getNextPage: (() => void) | null\r\n    getPreviousPage: (() => void) | null\r\n  }\r\n  fields: IConfigDisplayField[]\r\n  customActions?: IConfigCustomAction[]\r\n  customLabels?: ICustomLabels\r\n}\r\n\r\nexport const Cards = ({ items, fields, callbacks, customActions, customLabels, pagination }: IProps) => {\r\n  const editLabel: string = customLabels?.buttons?.editItem || 'Edit';\r\n  const deleteLabel: string = customLabels?.buttons?.deleteItem || 'Delete';\r\n  const paginationCallbacks = {\r\n    nextPage: callbacks.getNextPage || (() => { return; }),\r\n    previousPage: callbacks.getPreviousPage || (() => { return; }),\r\n  };\r\n\r\n  function renderRow(origField: IConfigDisplayField, origItem: any, value: any) {\r\n    if (origField.type === 'boolean') {\r\n      value = value ? true : false;\r\n    }\r\n\r\n    if (value && typeof value === 'object') {\r\n      return 'object';\r\n    }\r\n\r\n    switch (origField.type) {\r\n      case 'text':\r\n        return <span>{value}</span>;\r\n      case 'boolean':\r\n        return <div className={`bool ${value ? 'true' : 'false'}`}></div>;\r\n      case 'image':\r\n        if (!value) {\r\n          return <React.Fragment></React.Fragment>;\r\n        }\r\n        return <img src={value || ''} alt={value || origField.label || origField.name} />;\r\n      case 'url':\r\n        let url: string = origField.url || value || '';\r\n\r\n        // Replace all url vars\r\n        fields.forEach((field) => {\r\n          const fieldValue = dataHelpers.extractDataByDataPath(origItem, field.dataPath, field.name);\r\n          url = url.replace(`:${field.name}`, fieldValue);\r\n        });\r\n\r\n        return <a href={url} target=\"_blank\" rel=\"noopener noreferrer\">{origField.urlLabel || value}</a>;\r\n      case 'colorbox':\r\n        return <div className=\"colorbox\" style={{ backgroundColor: value }}></div>;\r\n      case 'html':\r\n        const htmlCode = origField.htmlCode || '<span>{value}</span>';\r\n        const html =  htmlCode.replace('{value}', value);\r\n        return <div dangerouslySetInnerHTML={{__html: html}}></div>\r\n      default:\r\n        return value;\r\n    }\r\n  }\r\n\r\n  function renderActions(item: any, cardIdx: number) {\r\n    return (\r\n      <div className=\"actions-wrapper\">\r\n        {\r\n          callbacks.put &&\r\n          <Button onClick={() => callbacks.put?.(item)} title={editLabel}>\r\n            <i className=\"fa fa-pencil-square-o\" aria-hidden=\"true\"></i>\r\n          </Button>\r\n        }\r\n        {\r\n          (customActions && customActions.length > 0) &&\r\n          customActions.map((action, idx) => (\r\n            <Button key={`action_${cardIdx}_${idx}`} onClick={() => callbacks.action(item, action)} title={action.name}>\r\n              <i className={`fa fa-${action.icon || 'cogs'}`} aria-hidden=\"true\"></i>\r\n            </Button>\r\n          ))\r\n        }\r\n        {\r\n          callbacks.delete &&\r\n          <Button onClick={() => callbacks.delete?.(item)} title={deleteLabel}>\r\n            <i className=\"fa fa-times\" aria-hidden=\"true\"></i>\r\n          </Button>\r\n        }\r\n      </div>\r\n    );\r\n  }\r\n\r\n  function renderCard(item: any, cardIdx: number) {\r\n    return (\r\n      <div className=\"card\" key={`card_${cardIdx}`}>\r\n        {\r\n          fields.map((field, fieldIdx) => {\r\n            const value = dataHelpers.extractDataByDataPath(item, field.dataPath, field.name);\r\n            return (\r\n              <div className={`card-row ${field.type}`} key={`card_${cardIdx}_${fieldIdx}`}>\r\n                {\r\n                  field.type !== 'image' &&\r\n                  <label>{field.label || field.name}: </label>\r\n                }\r\n                {renderRow(field, item, value)}\r\n              </div>\r\n            );\r\n          })\r\n        }\r\n        {renderActions(item, cardIdx)}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  function renderCardSkeleton(cardIdx: number) {\r\n    return (\r\n      <div className=\"card\" key={`card_${cardIdx}`}>\r\n        {\r\n          fields.map((field, fieldIdx) => {\r\n            return (\r\n              <div className={`card-row ${field.type}`} key={`card_${cardIdx}_${fieldIdx}`}>\r\n                {\r\n                  field.type !== 'image' &&\r\n                  <label>{field.label || field.name}: </label>\r\n                }\r\n                <Skeleton duration={0.6} />\r\n              </div>\r\n            );\r\n          })\r\n        }\r\n        {renderActions({}, cardIdx)}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  function renderSkeletons() {\r\n    const startingIndex = items.length;\r\n    const skeletonsIndexes = Array.from(Array(pagination?.limit).keys()).map(value => value + startingIndex);\r\n    return skeletonsIndexes.map(renderCardSkeleton);\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (\r\n      pagination?.type === 'infinite-scroll'\r\n      && document.body.clientHeight <= window.innerHeight\r\n      && callbacks.getNextPage\r\n      && pagination?.hasNextPage\r\n    ) {\r\n      callbacks.getNextPage();\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n\r\n  if (pagination?.type === 'infinite-scroll') {\r\n    return (\r\n      <InfiniteScroll className=\"cards-wrapper\"\r\n        dataLength={items.length}\r\n        next={callbacks.getNextPage || (() => null)}\r\n        hasMore={pagination?.hasNextPage || false}\r\n        loader={renderSkeletons()}\r\n      >\r\n        {items.map(renderCard)}\r\n      </InfiniteScroll>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <div className=\"cards-wrapper\">\r\n        {items.map(renderCard)}\r\n      </div>\r\n      {\r\n        pagination &&\r\n        pagination.type === 'buttons' &&\r\n        <Pagination\r\n          callbacks={paginationCallbacks}\r\n          pagination={pagination}\r\n        ></Pagination>\r\n      }\r\n    </React.Fragment>\r\n  )\r\n}\r\n","import React, { useState } from 'react';\r\nimport { orderBy } from 'natural-orderby';\r\nimport { toast } from 'react-toastify';\r\n\r\nimport { IConfigInputField, IConfigOptionSource, ICustomLabels } from '../../common/models/config.model';\r\nimport { Button } from '../button/button.comp';\r\nimport { withAppContext } from '../withContext/withContext.comp';\r\nimport { IAppContext } from '../app.context';\r\nimport { dataHelpers } from '../../helpers/data.helpers';\r\n\r\nimport './formRow.scss';\r\n\r\ninterface IProps {\r\n  context: IAppContext\r\n  field: IConfigInputField\r\n  onChange: (fieldName: string, value: any, submitAfterChange?: boolean) => void\r\n  showReset?: boolean\r\n  direction?: 'row' | 'column'\r\n}\r\n\r\nexport const FormRow = withAppContext(({ context, field, direction, showReset, onChange }: IProps) => {\r\n  const [optionSources, setOptionSources] = useState<any>({});\r\n  const { httpService, activePage, config } = context;\r\n  const pageHeaders: any = activePage?.requestHeaders || {};\r\n  const customLabels: ICustomLabels | undefined = { ...config?.customLabels, ...activePage?.customLabels };\r\n  const addArrayItemLabel = customLabels?.buttons?.addArrayItem || 'Add Item';\r\n  const clearLabel = customLabels?.buttons?.clearInput || 'Clear';\r\n\r\n  async function loadOptionSourceFromRemote(fieldName: string, optionSource: IConfigOptionSource) {\r\n    try {\r\n      const { url, dataPath, actualMethod, requestHeaders } = optionSource;\r\n\r\n      if (!url) {\r\n        throw new Error(`URL option source (for field \"${fieldName}\") is empty.`);\r\n      }\r\n\r\n      const result = await httpService.fetch({\r\n        method: actualMethod || 'get',\r\n        origUrl: url,\r\n        queryParams: [],\r\n        headers: Object.assign({}, pageHeaders, requestHeaders || {}),\r\n      });\r\n\r\n      const extractedData = dataHelpers.extractDataByDataPath(result, dataPath);\r\n\r\n      if (!extractedData || !extractedData.length) {\r\n        throw new Error(`Option source data is empty (for field \"${fieldName}\")`);\r\n      }\r\n\r\n      // Map option source to fields\r\n      const optionSourceData = extractedData.map((option: any, idx: number) => {\r\n        const { valuePath, displayPath } = optionSource;\r\n\r\n        if (typeof option === 'string') {\r\n          return option;\r\n        }\r\n\r\n        return {\r\n          display: displayPath && option[displayPath] ? option[displayPath] : `Option ${idx + 1}`,\r\n          value: valuePath && option[valuePath] ? option[valuePath] : `${idx}`,\r\n        };\r\n      });\r\n\r\n      setOptionSources({\r\n        ...optionSources,\r\n        [fieldName]: optionSourceData\r\n      });\r\n    } catch (e) {\r\n      toast.error(e.message);\r\n    }\r\n  }\r\n\r\n  function addItemToFieldArray(e: any, originalField: IConfigInputField) {\r\n    e.preventDefault();\r\n\r\n    onChange(field.name, [\r\n      ...(originalField.value || []),\r\n      ''\r\n    ]);\r\n  }\r\n\r\n  function removeItemToFieldArray(originalField: IConfigInputField, idx: number) {\r\n    const updatedArray = [\r\n      ...(originalField.value || [])\r\n    ];\r\n\r\n    updatedArray.splice(idx, 1);\r\n\r\n    onChange(field.name, updatedArray);\r\n  }\r\n\r\n  function renderArrayItems(originalField: IConfigInputField) {\r\n    const array: any[] = originalField.value || [];\r\n\r\n    return (\r\n      <div className=\"array-form\">\r\n        {\r\n          array.map((item, itemIdx) => {\r\n            const inputField = renderFieldInput({\r\n              value: item,\r\n              name: `${originalField.name}.${itemIdx}`,\r\n            } as IConfigInputField, (fieldName, value) => {\r\n              const updatedArray = (originalField.value || []).map((localValue: any, idx: number) => {\r\n                if (idx === itemIdx) {\r\n                  return value;\r\n                }\r\n                return localValue;\r\n              });\r\n\r\n              onChange(originalField.name, updatedArray);\r\n            });\r\n\r\n            return (\r\n              <div className=\"array-form-item\" key={`array_form_${itemIdx}`}>\r\n                {inputField}\r\n                <i title={clearLabel} onClick={() => removeItemToFieldArray(originalField, itemIdx)} aria-label=\"Remove\" className=\"clear-input fa fa-times\"></i>\r\n              </div>\r\n            )\r\n          })\r\n        }\r\n        <Button className=\"add-array-item\" onClick={(e) => addItemToFieldArray(e, originalField)} title={addArrayItemLabel}>\r\n          <i className=\"fa fa-plus\" aria-hidden=\"true\"></i>\r\n        </Button>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  function renderFieldInput(field: IConfigInputField, changeCallback: (fieldName: string, value: any, submitAfterChange?: boolean) => void) {\r\n    const inputProps = (defaultPlaceholder: string = '') => {\r\n      return {\r\n        value: field.value,\r\n        placeholder: field.placeholder || defaultPlaceholder,\r\n        disabled: field.readonly,\r\n        required: field.required,\r\n        onChange: (e: any) => changeCallback(field.name, e.target.value),\r\n      };\r\n    };\r\n\r\n    switch (field.type) {\r\n      case 'boolean':\r\n        return <input type=\"checkbox\" {...inputProps()} checked={field.value} onChange={(e) => changeCallback(field.name, e.target.checked, true)} />;\r\n      case 'select':\r\n        {\r\n          const { optionSource } = field;\r\n\r\n          if (optionSource && !optionSources[field.name]) {\r\n            loadOptionSourceFromRemote(field.name, optionSource);\r\n            return <select {...inputProps()}><option>-- Loading Options... --</option></select>\r\n          }\r\n\r\n          const sortBy = field.optionSource?.sortBy;\r\n          const finalOptions: { value: string, display: string }[] = optionSources[field.name] || field.options || [];\r\n          const sortedOptions = orderBy(finalOptions, typeof sortBy === 'string' ? [sortBy] : (sortBy || []));\r\n\r\n          return (\r\n            <select {...inputProps()}>\r\n              <option>-- Select --</option>\r\n              {\r\n                sortedOptions.map((option, idx) => {\r\n                  const key = `option_${idx}_`;\r\n                  if (typeof option !== 'object') {\r\n                    return <option key={`${key}_${option}`} value={option}>{option}</option>\r\n                  }\r\n                  return <option key={`${key}_${option.value}`} value={option.value}>{option.display || option.value}</option>\r\n                })\r\n              }\r\n            </select>\r\n          );\r\n        };\r\n      case 'object':\r\n        return <textarea {...inputProps(customLabels?.placeholders?.object || 'Enter JSON...')}></textarea>;\r\n      case 'array': {\r\n        const { arrayType, value } = field;\r\n        if (!value || !arrayType || arrayType === 'object') {\r\n          return <textarea {...inputProps(customLabels?.placeholders?.array || 'Enter JSON array...')}></textarea>;\r\n        }\r\n        return renderArrayItems(field);\r\n      }\r\n      case 'long-text':\r\n        return <textarea {...inputProps(customLabels?.placeholders?.text || 'Enter text...')}></textarea>;\r\n      case 'number':\r\n      case 'integer':\r\n        return <input type=\"number\" {...inputProps(customLabels?.placeholders?.number || '0')} onChange={(e) => changeCallback(field.name, e.target.valueAsNumber)} />;\r\n      case 'color':\r\n        return <input type=\"color\" {...inputProps(customLabels?.placeholders?.color || 'Enter color...')} />;\r\n      case 'email':\r\n        return <input type=\"email\" {...inputProps(customLabels?.placeholders?.email || 'Enter email...')} />;\r\n      case 'password':\r\n        return <input type=\"password\" {...inputProps(customLabels?.placeholders?.password || 'Enter password...')} />;\r\n      case 'hidden':\r\n        return <input type=\"hidden\" value={field.value} />;\r\n      case 'file':\r\n        return <input type=\"file\" accept={field.accept || '*'} placeholder={field.placeholder || customLabels?.placeholders?.file || 'Select file...'} name={field.name || 'file'} disabled={field.readonly} required={field.required} />;\r\n      case 'note':\r\n        return <p className=\"note\">{field.value}</p>;\r\n      case 'date':\r\n        return <input type=\"date\" {...inputProps(customLabels?.placeholders?.date || 'Enter date...')} />;\r\n      case 'text':\r\n      default:\r\n        return <input type=\"text\" {...inputProps(customLabels?.placeholders?.text || 'Enter text...')} />;\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className={`form-row ${direction || 'row'}`}>\r\n      {\r\n        field.type !== 'hidden' &&\r\n        <label>{field.label || field.originalName}{field.required ? ' *' : ''}</label>\r\n      }\r\n      {renderFieldInput(field, onChange)}\r\n      {\r\n        (showReset && !field.readonly && field.value && field.value.length > 0) &&\r\n        <i title={clearLabel} onClick={() => onChange(field.name, '', true)} aria-label=\"Clear\" className=\"clear-input fa fa-times\"></i>\r\n      }\r\n    </div>\r\n  );\r\n});\r\n","import React, { useState, useEffect } from 'react';\r\n\r\nimport { IConfigInputField, IConfigPagination } from '../../common/models/config.model';\r\nimport { FormRow } from '../formRow/formRow.comp';\r\nimport { Button } from '../button/button.comp';\r\n\r\nimport './queryParams.scss';\r\n\r\ninterface IProps {\r\n  initialParams: IConfigInputField[]\r\n  paginationConfig?: IConfigPagination\r\n  submitCallback: (queryParams: IConfigInputField[], reset?: boolean) => void\r\n}\r\n\r\nexport const QueryParams = ({ initialParams, paginationConfig, submitCallback }: IProps) => {\r\n  const [queryParams, setQueryParams] = useState<IConfigInputField[]>(initialParams);\r\n\r\n  function submit(e?: any) {\r\n    if (e) {\r\n      e.preventDefault();\r\n    }\r\n\r\n    if (paginationConfig && paginationConfig.type === 'infinite-scroll') {\r\n      submitCallback(queryParams, true);\r\n    } else {\r\n      submitCallback(queryParams);\r\n    }\r\n  }\r\n\r\n  function formChanged(fieldName: string, value: any, submitAfterChange?: boolean) {\r\n    const updatedQueryParams: IConfigInputField[] = [...queryParams].map((field) => {\r\n      if (field.name === fieldName) {\r\n        field.value = value;\r\n      }\r\n\r\n      return field;\r\n    });\r\n\r\n    setQueryParams(updatedQueryParams);\r\n\r\n    if (submitAfterChange) {\r\n      submit();\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (paginationConfig && paginationConfig.type === 'infinite-scroll') {\r\n      const filteredParams = initialParams.filter(param => !['page', 'limit'].includes(param.name));\r\n      setQueryParams(filteredParams);\r\n    } else {\r\n      setQueryParams(initialParams);\r\n    }\r\n  }, [paginationConfig, initialParams]);\r\n\r\n  if (!queryParams.length) {\r\n    return <React.Fragment></React.Fragment>;\r\n  }\r\n\r\n  return (\r\n    <section className=\"query-params-form\">\r\n      <h5>Query Params:</h5>\r\n      <form onSubmit={submit}>\r\n        {\r\n          queryParams.map((queryParam, idx) => {\r\n            return (\r\n              <FormRow\r\n                key={`query_param_${idx}`}\r\n                field={queryParam}\r\n                onChange={formChanged}\r\n                showReset={!queryParam.type || queryParam.type === 'text'}\r\n              />\r\n            );\r\n          })\r\n        }\r\n        <Button type=\"submit\" onClick={submit}>Submit</Button>\r\n      </form>\r\n    </section>\r\n  );\r\n};","import React, { Component, RefObject, ReactChild } from 'react';\r\nimport ReactDOM from 'react-dom';\r\n\r\nimport './popup.scss';\r\nimport { ICustomLabels } from '../../common/models/config.model';\r\n\r\ninterface IPopupProps {\r\n  className?: string\r\n  style?: any\r\n  show: boolean\r\n  closeCallback: any\r\n  children: ReactChild\r\n  refCallback?: string | ((instance: HTMLDivElement | null) => void) | RefObject<HTMLDivElement> | null | undefined\r\n  customLabels?: ICustomLabels\r\n}\r\n\r\nlet portalRoot: HTMLDivElement = document.getElementById('popup-portal') as HTMLDivElement;\r\nif (!portalRoot) {\r\n  portalRoot = document.createElement('div');\r\n  portalRoot.setAttribute('id', 'popup-portal');\r\n  document.body.append(portalRoot);\r\n}\r\n\r\nclass PortalPopup extends Component {\r\n  private el: HTMLElement;\r\n\r\n  constructor(props: any) {\r\n    super(props);\r\n\r\n    this.el = document.createElement('div');\r\n  }\r\n\r\n  componentDidMount = () => {\r\n    portalRoot.appendChild(this.el);\r\n  }\r\n\r\n  componentWillUnmount = () => {\r\n    portalRoot.removeChild(this.el);\r\n  }\r\n\r\n  render() {\r\n    return ReactDOM.createPortal(this.props.children, this.el);\r\n  }\r\n}\r\n\r\nexport class Popup extends Component<IPopupProps> {\r\n  render() {\r\n    const style: any = Object.assign({}, { display: this.props.show ? 'block' : 'none' }, this.props.style || {});\r\n    const closeLabel = this.props.customLabels?.buttons?.closeForm || 'Close';\r\n\r\n    return (\r\n      <PortalPopup>\r\n        {\r\n          this.props.show ?\r\n            <div className={`popup ${this.props.className || ''}`} style={style}>\r\n              <div className=\"overlay\" onClick={(e: any) => this.props.closeCallback(e)}></div>\r\n              <div className=\"popup-content\" ref={this.props.refCallback}>\r\n                {this.props.children}\r\n                <button title={closeLabel} className=\"close-popup\" onClick={(e: any) => this.props.closeCallback(e)}>\r\n                  <i className=\"fa fa-times\" aria-hidden=\"true\"></i>\r\n                </button>\r\n              </div>\r\n            </div> :\r\n            null\r\n        }\r\n      </PortalPopup>\r\n    );\r\n  }\r\n\r\n  componentDidMount() {\r\n    document.addEventListener('keydown', this._handleKeyDown.bind(this));\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    document.removeEventListener('keydown', this._handleKeyDown.bind(this));\r\n  }\r\n\r\n  _handleKeyDown = (e: KeyboardEvent) => {\r\n    const { show, closeCallback } = this.props;\r\n\r\n    if (show && e.keyCode === 27) {\r\n      closeCallback(e);\r\n    }\r\n  }\r\n};","import { IConfigInputField } from '../common/models/config.model';\r\n\r\nclass FileHelpers {\r\n\r\n  public isMultipartForm(fields: IConfigInputField[]): boolean {\r\n    for (const fieldIndex in fields) {\r\n      let field = fields[fieldIndex];\r\n\r\n      if (field.type === 'file') {\r\n        return true;\r\n      }\r\n    }\r\n\r\n    return false;\r\n  }\r\n\r\n  \r\n}\r\n\r\nexport const fileHelpers = new FileHelpers();","import React, { useState, useEffect } from 'react';\r\nimport { toast } from 'react-toastify';\r\n\r\nimport { Popup } from '../popup/popup.comp';\r\nimport {\r\n  IConfigInputField,\r\n  IConfigGetSingleMethod,\r\n  IConfigPostMethod,\r\n  IConfigPutMethod,\r\n  ICustomLabels\r\n} from '../../common/models/config.model';\r\nimport { FormRow } from '../formRow/formRow.comp';\r\nimport { Button } from '../button/button.comp';\r\nimport { Loader } from '../loader/loader.comp';\r\nimport { dataHelpers } from '../../helpers/data.helpers';\r\nimport { fileHelpers } from '../../helpers/file.helpers';\r\nimport { IAppContext } from '../app.context';\r\nimport { withAppContext } from '../withContext/withContext.comp';\r\n\r\nimport './formPopup.scss';\r\n\r\nconst unflatten = require('flat').unflatten;\r\n\r\ninterface IProps {\r\n  context: IAppContext\r\n  title: string\r\n  fields: IConfigInputField[]\r\n  rawData?: any\r\n  getSingleConfig?: IConfigGetSingleMethod\r\n  methodConfig: IConfigPostMethod | IConfigPutMethod\r\n  closeCallback: (reloadData: boolean) => void\r\n  submitCallback: (body: any, containFiles: boolean) => void\r\n}\r\n\r\nexport const FormPopup = withAppContext(({ context, title, fields, rawData, getSingleConfig, methodConfig, submitCallback, closeCallback }: IProps) => {\r\n  const fieldsCopy: IConfigInputField[] = JSON.parse(JSON.stringify(fields));\r\n  const { httpService, activePage, config } = context;\r\n  const [loading, setLoading] = useState<boolean>(true);\r\n  const [formFields, setFormFields] = useState<IConfigInputField[]>([]);\r\n  const [finalRawData, setFinalRawData] = useState<any>(null);\r\n  const pageHeaders: any = activePage?.requestHeaders || {};\r\n  const customLabels: ICustomLabels | undefined = { ...config?.customLabels, ...activePage?.customLabels };\r\n\r\n  async function initFormFields() {\r\n    let finalRawData: any = rawData || {};\r\n\r\n    if (getSingleConfig && getSingleConfig.url) {\r\n      try {\r\n        const { url, requestHeaders, actualMethod, dataPath, queryParams } = getSingleConfig;\r\n        const result = await httpService.fetch({\r\n          method: actualMethod || 'get',\r\n          origUrl: url,\r\n          queryParams,\r\n          headers: Object.assign({}, pageHeaders,  requestHeaders || {}),\r\n          rawData,\r\n        });\r\n\r\n        const extractedData = dataHelpers.extractDataByDataPath(result, dataPath);\r\n\r\n        if (extractedData && typeof extractedData === 'object') {\r\n          finalRawData = extractedData;\r\n        }\r\n      } catch (e) {\r\n        console.error('Could not load single item\\'s data.', e);\r\n        toast.error('Could not load single item\\'s data.');\r\n      }\r\n    }\r\n\r\n    setFinalRawData(finalRawData); // Store the raw data for later.\r\n\r\n    setFormFields(fieldsCopy.map((field) => {\r\n      let key = field.name;\r\n\r\n      field.originalName = field.name;\r\n\r\n      let dataPathSplit: string[] = [];\r\n\r\n      if (field.dataPath) {\r\n        dataPathSplit = field.dataPath.split('.');\r\n        key = `${field.dataPath}.${field.name}`;\r\n      }\r\n\r\n      const lookup = () => {\r\n        let objToLookIn = finalRawData;\r\n        for(const pathElem of dataPathSplit) {\r\n          if(objToLookIn[pathElem] !== undefined && objToLookIn[pathElem] !== null) {\r\n            objToLookIn = objToLookIn[pathElem];\r\n          } else {\r\n            return undefined;\r\n          }\r\n        }\r\n        return objToLookIn[field.name];\r\n      }\r\n\r\n      const lookupValue = lookup();\r\n\r\n      // Changing field name to include datapath\r\n      // This will use us later for unflatten the final object\r\n      field.name = key;\r\n\r\n      if (dataHelpers.checkIfFieldIsObject(field)) {\r\n        if (lookupValue || field.value) {\r\n          field.value = JSON.stringify(lookupValue || field.value, null, '  ') || '';\r\n        }\r\n        return field;\r\n      }\r\n\r\n      if (field.type === 'array') {\r\n        field.value = lookupValue || field.value || [];\r\n        return field;\r\n      }\r\n\r\n      if (typeof lookupValue !== 'undefined') {\r\n        field.value = lookupValue;\r\n      } else {\r\n        // important in order to prevent controlled / uncontrolled components error\r\n        field.value = typeof field.value === 'undefined' ? '' : field.value;\r\n      }\r\n\r\n      return field;\r\n    }));\r\n\r\n    setLoading(false);\r\n  }\r\n\r\n  async function submitForm(e: any) {\r\n    e.preventDefault();\r\n\r\n    const finalObject: any = (methodConfig as IConfigPutMethod).includeOriginalFields ? Object.assign({}, finalRawData) : {};\r\n    const formData = new FormData();\r\n    const containFiles: boolean = fileHelpers.isMultipartForm(formFields);\r\n    let validationError = null;\r\n\r\n    formFields.forEach((field) => {\r\n      if (field.type === 'file') {\r\n        const fileInput: any = document.querySelector(`input[name=\"${field.name || 'file'}\"]`) as HTMLInputElement;\r\n\r\n        if (fileInput.files.length > 0) {\r\n          const firstFile = fileInput.files[0];\r\n          formData.append(field.name || 'file', firstFile, firstFile.name);\r\n        }\r\n        return;\r\n      }\r\n\r\n      finalObject[field.name] = field.value;\r\n\r\n      if (containFiles) {\r\n        formData.append(field.name, field.value);\r\n      }\r\n\r\n      // eslint-disable-next-line eqeqeq\r\n      if (field.required && field.type !== 'boolean' && !field.value && field.value != 0) {\r\n        validationError = 'Please fill up all required fields.';\r\n      }\r\n\r\n      if (dataHelpers.checkIfFieldIsObject(field) && field.value) {\r\n        try {\r\n          finalObject[field.name] = JSON.parse(field.value);\r\n        } catch (e) {\r\n          validationError = `Invalid JSON for field \"${field.name}\".`;\r\n        }\r\n      }\r\n\r\n      if (field.type === 'boolean') {\r\n        finalObject[field.name] = field.value || false;\r\n      }\r\n\r\n      if (field.type === 'encode') {\r\n        finalObject[field.name] = encodeURIComponent(field.value);\r\n      }\r\n    });\r\n\r\n    if (validationError) {\r\n      toast.error(validationError);\r\n      return;\r\n    }\r\n\r\n    setLoading(true);\r\n\r\n    try {\r\n      const body = containFiles ? formData : unflatten(finalObject);\r\n      await submitCallback(body, containFiles);\r\n\r\n      toast.success('Great Success!');\r\n\r\n      closeCallback(true);\r\n    } catch (e) {\r\n      toast.error(e.message);\r\n    }\r\n\r\n    setLoading(false);\r\n  }\r\n\r\n  function formChanged(fieldName: string, value: any) {\r\n    let updatedFormFields: IConfigInputField[] = JSON.parse(JSON.stringify(formFields));\r\n\r\n    updatedFormFields = updatedFormFields.map((field: IConfigInputField) => {\r\n      if (field.name === fieldName) {\r\n        field.value = value;\r\n      }\r\n\r\n      return field;\r\n    });\r\n\r\n    setFormFields(updatedFormFields);\r\n  }\r\n\r\n  useEffect(() => {\r\n    initFormFields();\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n\r\n  return (\r\n    <Popup\r\n      show={true}\r\n      className=\"form-popup\"\r\n      closeCallback={() => closeCallback(false)}\r\n      customLabels={customLabels}\r\n    >\r\n      <React.Fragment>\r\n        <h2>{title}</h2>\r\n        <section>\r\n          {\r\n            loading ?\r\n            <Loader /> :\r\n            <form onSubmit={submitForm}>\r\n              {\r\n                formFields.map((field, idx) => {\r\n                  return (\r\n                    <FormRow\r\n                      key={`field_${idx}`}\r\n                      field={field}\r\n                      onChange={formChanged}\r\n                      showReset={!field.type || field.type === 'text'}\r\n                    />\r\n                  );\r\n                })\r\n              }\r\n              <div className=\"buttons-wrapper center\">\r\n                <Button type=\"submit\" onClick={submitForm} color=\"green\">Submit</Button>\r\n              </div>\r\n            </form>\r\n          }\r\n        </section>\r\n      </React.Fragment>\r\n    </Popup>\r\n  );\r\n});\r\n","import React from 'react';\r\n\r\nimport './filterField.scss';\r\n\r\ninterface IProps {\r\n  onChange: (filter: string) => void\r\n}\r\n\r\nexport const FilterField = ({ onChange }: IProps) => {\r\n  return (\r\n    <section className=\"filter-wrapper\">\r\n      <h5>Filter:</h5>\r\n      <div className=\"form-row\">\r\n        <input type=\"text\" placeholder=\"Search...\" onChange={(e) => onChange(e.target.value.toLowerCase())} />\r\n      </div>\r\n    </section>\r\n  );\r\n};","import { IPaginationState, IQueryPaginationState, IBodyPaginationState } from \"./states.model\";\r\n\r\nexport const isQueryPaginationState = (obj: IPaginationState): obj is IQueryPaginationState => {\r\n    return obj.source === 'query';\r\n}\r\n\r\nexport const isBodyPaginationState = (obj: IPaginationState): obj is IBodyPaginationState => {\r\n    return obj.source === 'body';\r\n}","import { IConfigPagination, IConfigBodyPagination, IConfigQueryPagination } from \"./config.model\";\r\n\r\nexport const isQueryPagination = (obj: IConfigPagination): obj is IConfigQueryPagination => {\r\n    return obj.source === 'query';\r\n}\r\n\r\nexport const isBodyPagination = (obj: IConfigPagination): obj is IConfigBodyPagination => {\r\n    return obj.source === 'body';\r\n}\r\n","import React, { useEffect, useState } from 'react';\r\nimport { useParams, useHistory } from 'react-router-dom';\r\nimport * as QueryString from 'query-string';\r\nimport { toast } from 'react-toastify';\r\nimport { orderBy } from 'natural-orderby';\r\nimport { find, remove } from 'lodash';\r\n\r\nimport { IAppContext } from '../app.context';\r\nimport { IConfigPage, IConfigMethods, IConfigGetAllMethod, IConfigPostMethod, IConfigPutMethod, IConfigDeleteMethod, IConfigInputField, IConfigCustomAction, IConfigGetSingleMethod, ICustomLabels, IConfigPagination } from '../../common/models/config.model';\r\nimport { IPaginationState, IQueryPaginationState, IBodyPaginationState } from '../../common/models/states.model';\r\nimport { withAppContext } from '../withContext/withContext.comp';\r\nimport { Loader } from '../loader/loader.comp';\r\nimport { dataHelpers } from '../../helpers/data.helpers';\r\nimport { paginationHelpers } from '../../helpers/pagination.helpers';\r\nimport { Table } from '../table/table.comp';\r\nimport { Cards } from '../cards/cards.comp';\r\nimport { QueryParams } from '../queryParams/queryParams.comp';\r\nimport { Button } from '../button/button.comp';\r\nimport { FormPopup } from '../formPopup/formPopup.comp';\r\nimport { FilterField } from '../filterField/filterField.comp';\r\nimport { isQueryPaginationState, isBodyPaginationState } from '../../common/models/states.types.helper';\r\nimport { isQueryPagination, isBodyPagination } from '../../common/models/config.types.helper';\r\n\r\nimport './page.scss';\r\n\r\ninterface IProps {\r\n  context: IAppContext\r\n}\r\n\r\ninterface IPopupProps {\r\n  type: 'add' | 'update' | 'action'\r\n  title: string\r\n  config: IConfigPostMethod | IConfigPutMethod\r\n  submitCallback: (body: any, containFiles: boolean) => void\r\n  getSingleConfig?: IConfigGetSingleMethod\r\n  rawData?: {}\r\n}\r\n\r\nconst buildInitQueryParamsAndPaginationState = (\r\n  initQueryParams: IConfigInputField[],\r\n  paginationConfig?: IConfigPagination,\r\n): {\r\n  initQueryParams: IConfigInputField[],\r\n  initialPagination?: IPaginationState,\r\n} => {\r\n    let initialPagination: IPaginationState | undefined = undefined;\r\n\r\n    if (paginationConfig) {\r\n      if(isQueryPagination(paginationConfig)) {\r\n        initialPagination = {\r\n          source: paginationConfig.source,\r\n          type: paginationConfig.type,\r\n          page: parseInt(paginationConfig.params?.page?.value || '1'),\r\n          limit: parseInt(paginationConfig.params?.limit?.value || '10'),\r\n          descending: paginationConfig.params?.descending?.value === 'true' || false,\r\n          hasPreviousPage: false,\r\n          hasNextPage: false,\r\n          sortBy: paginationConfig.params?.sortBy?.value,\r\n        };\r\n\r\n        if (!find(initQueryParams, { name: 'page' })) {\r\n          initQueryParams.push({\r\n            name: paginationConfig?.params?.page?.name,\r\n            label: paginationConfig?.params?.page?.label || 'Page',\r\n            value: initialPagination?.page\r\n          });\r\n        }\r\n\r\n        if (paginationConfig?.params?.limit && !find(initQueryParams, { name: 'limit' })) {\r\n          initQueryParams.push({\r\n            name: paginationConfig.params.limit.name,\r\n            label: paginationConfig.params.limit.label || 'Limit',\r\n            value: initialPagination?.limit\r\n          });\r\n        }\r\n\r\n        if (paginationConfig?.params?.descending && !find(initQueryParams, { name: 'descending' })) {\r\n          initQueryParams.push({\r\n            name: paginationConfig.params.descending.name,\r\n            label: paginationConfig.params.descending.label || 'Descending',\r\n            value: initialPagination?.descending\r\n          });\r\n        }\r\n\r\n        if (paginationConfig?.params?.sortBy && !find(initQueryParams, { name: 'sortBy' })) {\r\n          initQueryParams.push({\r\n            name: paginationConfig.params.sortBy.name,\r\n            label: 'Sort by',\r\n            value: initialPagination?.sortBy\r\n          });\r\n        }\r\n      } else if(isBodyPagination(paginationConfig)) {\r\n        initialPagination = {\r\n          source: 'body',\r\n          type: paginationConfig.type,\r\n          hasNextPage: false,\r\n          hasPreviousPage: false,\r\n          next: null,\r\n          previous: null,\r\n          limit: parseInt(paginationConfig.params?.limit?.value || '10')\r\n        }\r\n\r\n        if (paginationConfig?.params?.limit && !find(initQueryParams, { name: 'limit' })) {\r\n          initQueryParams.push({\r\n            name: paginationConfig.params.limit.name,\r\n            label: paginationConfig.params.limit.label || 'Limit',\r\n            value: initialPagination?.limit\r\n          });\r\n        }\r\n\r\n      } else {\r\n        throw new Error('unrecognized pagination');\r\n      }\r\n    }\r\n\r\n    return {\r\n      initQueryParams,\r\n      initialPagination\r\n    };\r\n};\r\n\r\nconst PageComp = ({ context }: IProps) => {\r\n  const { page } = useParams();\r\n  const { push, location } = useHistory();\r\n  const { activePage, error, setError, httpService, config } = context;\r\n  const pageHeaders: any = activePage?.requestHeaders || {};\r\n  const pageMethods: IConfigMethods | undefined = activePage?.methods;\r\n  const customActions: IConfigCustomAction[] = activePage?.customActions || [];\r\n  const getAllConfig: IConfigGetAllMethod | undefined = pageMethods?.getAll;\r\n  const paginationConfig = getAllConfig?.pagination;\r\n  const infiniteScroll = paginationConfig?.type === 'infinite-scroll';\r\n  const getSingleConfig: IConfigGetSingleMethod | undefined = pageMethods?.getSingle;\r\n  const postConfig: IConfigPostMethod | undefined = pageMethods?.post;\r\n  const putConfig: IConfigPutMethod | undefined = pageMethods?.put;\r\n  const deleteConfig: IConfigDeleteMethod | undefined = pageMethods?.delete;\r\n  const customLabels: ICustomLabels | undefined = { ...config?.customLabels, ...activePage?.customLabels };\r\n  const addItemLabel = customLabels?.buttons?.addItem || '+ Add Item';\r\n  const addItemFormTitle = customLabels?.formTitles?.addItem || 'Add Item';\r\n  const editItemFormTitle = customLabels?.formTitles?.editItem || 'Update Item';\r\n  const { initQueryParams, initialPagination } = buildInitQueryParamsAndPaginationState(getAllConfig?.queryParams || [], paginationConfig);\r\n  const [loading, setLoading] = useState<boolean>(false);\r\n  const [openedPopup, setOpenedPopup] = useState<null | IPopupProps>(null);\r\n  const [queryParams, setQueryParams] = useState<IConfigInputField[]>(initQueryParams);\r\n  const [pagination, setPagination] = useState<IPaginationState | undefined>(initialPagination);\r\n  const [items, setItems] = useState<any[]>([]);\r\n  const [filter, setFilter] = useState<string>('');\r\n\r\n  function closeFormPopup(refreshData: boolean = false) {\r\n    setOpenedPopup(null);\r\n\r\n    if (refreshData === true) {\r\n      if (pagination?.type === 'infinite-scroll') {\r\n        setItems([]);\r\n        const updatedParams = [...queryParams];\r\n        remove(updatedParams, param => ['page', 'limit'].includes(param.name));\r\n        setQueryParams(buildInitQueryParamsAndPaginationState(updatedParams, paginationConfig).initQueryParams);\r\n      } else {\r\n        getAllRequest();\r\n      }\r\n    }\r\n  }\r\n\r\n  async function openEditPopup(rawData: any) {\r\n    const params: IPopupProps = {\r\n      rawData,\r\n      type: 'update',\r\n      title: editItemFormTitle,\r\n      config: putConfig as IConfigPutMethod,\r\n      getSingleConfig,\r\n      submitCallback: async (body: any, containFiles: boolean) => {\r\n        return await updateItem(body, rawData, containFiles);\r\n      }\r\n    };\r\n\r\n    setOpenedPopup(params);\r\n  }\r\n\r\n  function openCustomActionPopup(rawData: any, action: IConfigCustomAction) {\r\n    const params: IPopupProps = {\r\n      rawData,\r\n      type: 'action',\r\n      title: action.name || 'Custom Action',\r\n      config: action as IConfigCustomAction,\r\n      submitCallback: async (body: any, containFiles: boolean) => {\r\n        return await performAction(body, rawData, action, containFiles);\r\n      }\r\n    };\r\n\r\n    setOpenedPopup(params);\r\n  }\r\n\r\n  async function performAction(body: any, rawData: any, action: IConfigCustomAction, containFiles: boolean) {\r\n    const { url, requestHeaders, actualMethod } = action;\r\n\r\n    return await httpService.fetch({\r\n      method: actualMethod || 'put',\r\n      origUrl: url,\r\n      rawData,\r\n      body: containFiles ? body : JSON.stringify(body),\r\n      headers: {\r\n        ...pageHeaders,\r\n        ...(requestHeaders || {}),\r\n        ...(containFiles ? {} : { 'content-type': 'application/json' })\r\n      },\r\n      responseType: 'boolean'\r\n    });\r\n  }\r\n\r\n  function extractQueryParams(params: IConfigInputField[]): IConfigInputField[] {\r\n    if(!paginationConfig || isQueryPagination(paginationConfig)) {\r\n      const parsedParams = QueryString.parse(location.search);\r\n      const finalQueryParams = params.map((queryParam) => {\r\n        if (typeof parsedParams[queryParam.name] !== 'undefined') {\r\n          queryParam.value = queryParam.type === 'boolean' ? (parsedParams[queryParam.name] === 'true') : decodeURIComponent(parsedParams[queryParam.name] as any);\r\n        } else {\r\n          queryParam.value = queryParam.value || '';\r\n        }\r\n        return queryParam;\r\n      });\r\n\r\n      setPagination(getUpdatedPaginationState(finalQueryParams, null))\r\n\r\n      return finalQueryParams;\r\n    } else {\r\n      return params;\r\n    }\r\n  }\r\n\r\n  async function fetchPageData(params: {\r\n    actualMethod: 'get' | 'put' | 'post' | 'patch' | 'delete', \r\n    url: string,\r\n    requestHeaders?: any,\r\n    dataPath: string,\r\n    dataTransform: any,\r\n    sortBy: any\r\n  }) {\r\n    const result = await httpService.fetch({\r\n      method: params.actualMethod || 'get',\r\n      origUrl: params.url,\r\n      queryParams,\r\n      headers: Object.assign({}, pageHeaders, params.requestHeaders || {})\r\n    });\r\n    let extractedData = dataHelpers.extractDataByDataPath(result, params.dataPath);\r\n\r\n    if (!extractedData) {\r\n      throw new Error('Could not extract data from response.');\r\n    }\r\n\r\n    if (!Array.isArray(extractedData)) {\r\n      throw new Error('Extracted data is invalid.');\r\n    }\r\n\r\n    if (typeof params.dataTransform === 'function') {\r\n      extractedData = await params.dataTransform(extractedData);\r\n    }\r\n\r\n    const orderedItems = orderBy(extractedData, typeof params.sortBy === 'string' ? [params.sortBy] : (params.sortBy || []));\r\n\r\n    if (paginationConfig) {\r\n      const total = paginationConfig.fields?.total ? dataHelpers.extractDataByDataPath(result, paginationConfig.fields.total.dataPath) : undefined;\r\n      const newPaginationState = getUpdatedPaginationState(queryParams, result, total);\r\n      if (newPaginationState) {\r\n        setPagination(newPaginationState);\r\n      }\r\n    }\r\n\r\n    if (infiniteScroll) {\r\n      setItems([...items, ...orderedItems]);\r\n    } else {\r\n      setItems(orderedItems);\r\n    }\r\n  }\r\n\r\n  async function getAllRequest() {\r\n    if (infiniteScroll) {\r\n      if(pagination) {\r\n        if(isQueryPaginationState(pagination)) {\r\n          if(pagination?.page !== 1) {\r\n            setLoading(false);\r\n          }\r\n        } else if( isBodyPaginationState(pagination)) {\r\n          if(pagination.previous) {\r\n            setLoading(false);\r\n          }\r\n        } else {\r\n          throw new Error('unrecognized pagination source');\r\n        }\r\n      }\r\n    } else {\r\n      setLoading(true);\r\n    }\r\n\r\n    setError(null);\r\n\r\n    try {\r\n      if (!getAllConfig) {\r\n        throw new Error('Get all method is not defined.');\r\n      }\r\n\r\n      if (paginationConfig && !pagination) {\r\n        throw new Error('Pagination not initialized.');\r\n      }\r\n\r\n      const { url, requestHeaders, actualMethod, dataPath, sortBy, dataTransform } = getAllConfig;\r\n      await fetchPageData({\r\n        actualMethod: actualMethod,\r\n        url: url,\r\n        requestHeaders: requestHeaders,\r\n        dataPath: dataPath,\r\n        dataTransform: dataTransform,\r\n        sortBy: sortBy\r\n      });\r\n    } catch (e) {\r\n      setError(e.message);\r\n    }\r\n\r\n    setLoading(false);\r\n  }\r\n\r\n  async function addItem(body: any, containFiles?: boolean) {\r\n    if (!postConfig) {\r\n      throw new Error('Post method is not defined.');\r\n    }\r\n\r\n    const { url, requestHeaders, actualMethod } = postConfig;\r\n\r\n    return await httpService.fetch({\r\n      method: actualMethod || 'post',\r\n      origUrl: url,\r\n      body: containFiles ? body : JSON.stringify(body),\r\n      headers: {\r\n        ...pageHeaders,\r\n        ...(requestHeaders || {}),\r\n        ...(containFiles ? {} : { 'content-type': 'application/json' })\r\n      },\r\n      responseType: 'boolean'\r\n    });\r\n  }\r\n\r\n  async function updateItem(body: any, rawData: any, containFiles?: boolean) {\r\n    if (!putConfig) {\r\n      throw new Error('Put method is not defined.');\r\n    }\r\n\r\n    const { url, requestHeaders, actualMethod } = putConfig;\r\n\r\n    return await httpService.fetch({\r\n      method: actualMethod || 'put',\r\n      origUrl: url,\r\n      rawData,\r\n      body: containFiles ? body : JSON.stringify(body),\r\n      headers: {\r\n        ...pageHeaders,\r\n        ...(requestHeaders || {}),\r\n        ...(containFiles ? {} : { 'content-type': 'application/json' })\r\n      },\r\n      responseType: 'boolean'\r\n    });\r\n  }\r\n\r\n  async function deleteItem(item: any) {\r\n    const approved: boolean = window.confirm('Are you sure you want to delete this item?');\r\n\r\n    if (!approved) {\r\n      return;\r\n    }\r\n\r\n    try {\r\n      if (!deleteConfig) {\r\n        throw new Error('Delete method is not defined.');\r\n      }\r\n\r\n      const { url, requestHeaders, actualMethod } = deleteConfig;\r\n      const success = await httpService.fetch({\r\n        method: actualMethod || 'delete',\r\n        origUrl: url,\r\n        rawData: item,\r\n        headers: Object.assign({}, pageHeaders, requestHeaders || {}),\r\n        responseType: 'boolean'\r\n      });\r\n\r\n      if (success) {\r\n        if (pagination?.type === 'infinite-scroll') {\r\n          setItems([]);\r\n          const updatedParams = [...queryParams];\r\n          remove(updatedParams, param => ['page', 'limit'].includes(param.name));\r\n          setQueryParams(buildInitQueryParamsAndPaginationState(updatedParams, paginationConfig).initQueryParams);\r\n        } else {\r\n          getAllRequest();\r\n        }\r\n      }\r\n    } catch (e) {\r\n      toast.error(e.message);\r\n    }\r\n  }\r\n\r\n  function submitQueryParams(updatedParams: IConfigInputField[], reset?: boolean) {\r\n    if (loading) {\r\n      return;\r\n    }\r\n    \r\n    if (reset) {\r\n      setItems([]);\r\n      remove(updatedParams, param => ['page', 'limit'].includes(param.name));\r\n      updatedParams = buildInitQueryParamsAndPaginationState(updatedParams, paginationConfig).initQueryParams;\r\n    }\r\n\r\n    setQueryParams(updatedParams);\r\n    setPagination(getUpdatedPaginationState(updatedParams, null));\r\n\r\n    let paramsToUrl = [...updatedParams];\r\n\r\n    if (paginationConfig?.type === 'infinite-scroll') {\r\n      paramsToUrl = paramsToUrl.filter(param => !['page', 'limit'].includes(param.name));\r\n    }\r\n\r\n    // Building query string\r\n    const queryState: string = paramsToUrl.map((queryParam, idx) => {\r\n      let value = queryParam.value;\r\n\r\n      if (queryParam.type === 'select' && value === '-- Select --') {\r\n          // default value means nothing was selected and thus we explicitly\r\n          // empty out the value in this case; otherwise the string '-- Select --'\r\n          // is used as the value for the given queryParams\r\n          value = '';\r\n      }\r\n\r\n      return `${idx === 0 ? '?' : ''}${queryParam.name}=${encodeURIComponent(value || '')}`;\r\n    }).join('&');\r\n\r\n    // Pushing query state to url\r\n    if (page && queryState) {\r\n      push(queryState);\r\n    }\r\n  }\r\n\r\n  function getUpdatedPaginationState(updatedParams: IConfigInputField[], result: any, total?: number): IPaginationState | undefined {\r\n    if (!paginationConfig) {\r\n      return;\r\n    }\r\n\r\n    if(isQueryPagination(paginationConfig)) {\r\n      if(pagination && !isQueryPaginationState(pagination)) {\r\n        throw new Error('unexpected pagination source ' + pagination.source)\r\n      }\r\n      const newState: IQueryPaginationState = pagination ? pagination : {\r\n        source: 'query',\r\n        type: paginationConfig.type,\r\n        page: parseInt(paginationConfig.params?.page?.value || '1'),\r\n        limit: parseInt(paginationConfig.params?.limit?.value || '10'),\r\n        descending: paginationConfig.params?.descending?.value === 'true' || false,\r\n        hasPreviousPage: false,\r\n        hasNextPage: false,\r\n        sortBy: paginationConfig.params?.sortBy?.value,\r\n      };\r\n\r\n      newState.total = total || pagination?.total;\r\n      newState.page = parseInt(updatedParams.find(param => param.name === paginationConfig?.params?.page?.name)?.value) || newState.page;\r\n      newState.limit = parseInt(updatedParams.find(param => param.name === paginationConfig?.params?.limit?.name)?.value) || newState.limit;\r\n      newState.descending = updatedParams.find(param => param.name === paginationConfig?.params?.descending?.name)?.value === 'true' || newState.descending;\r\n      newState.sortBy = updatedParams.find(param => param.name === paginationConfig?.params?.sortBy?.name)?.value || newState.sortBy;\r\n      newState.hasPreviousPage = paginationHelpers.hasPreviousPage(newState.page);\r\n      newState.hasNextPage = paginationHelpers.hasNextPage(newState.page, newState.limit, newState.total);\r\n      return newState;\r\n    } else if(isBodyPagination(paginationConfig)) {\r\n      if(pagination && !isBodyPaginationState(pagination)) {\r\n        throw new Error('unexpected pagination source ' + pagination.source)\r\n      }\r\n      const newState: IBodyPaginationState = pagination ? pagination : {\r\n        source: 'body',\r\n        type: paginationConfig.type,\r\n        next: result[paginationConfig.params.nextPath || 'next'],\r\n        previous: result[paginationConfig.params.prevPath || 'previous'],\r\n        hasNextPage: !!result[paginationConfig.params.nextPath || 'next'],\r\n        hasPreviousPage: !!result[paginationConfig.params.prevPath || 'previous'],\r\n        limit: parseInt(paginationConfig.params?.limit?.value || '10'),\r\n        total: result[paginationConfig.params.countPath || 'count']\r\n      };\r\n      if(result) {\r\n        newState.next = result[paginationConfig.params.nextPath || 'next'];\r\n        newState.previous = result[paginationConfig.params.prevPath || 'previous'];\r\n        newState.hasNextPage = !!result[paginationConfig.params.nextPath || 'next'];\r\n        newState.hasPreviousPage = !!result[paginationConfig.params.prevPath || 'previous'];\r\n        newState.total = result[paginationConfig.params.countPath || 'count'];\r\n      }\r\n      newState.limit = parseInt(updatedParams.find(param => param.name === paginationConfig?.params?.limit?.name)?.value) || newState.limit;\r\n      return newState;\r\n    } else {\r\n      throw new Error('unrecognized pagination source');\r\n    }\r\n  }\r\n\r\n  function renderItemsUI() {\r\n    if (loading) {\r\n      return <Loader />;\r\n    }\r\n\r\n    const fields = getAllConfig?.fields || getAllConfig?.display?.fields || [];\r\n    const fieldsToFilter = fields.filter((field) => (field.filterable)).map((field) => field.name);\r\n    let filteredItems = items;\r\n\r\n    if (filter && fieldsToFilter.length) {\r\n      filteredItems = items.filter((item) => {\r\n        let passFilter = false;\r\n        fieldsToFilter.forEach((fieldName) => {\r\n          const value = item[fieldName];\r\n          if (typeof value === 'string' && value.toLowerCase().indexOf(filter) >= 0) {\r\n            passFilter = true;\r\n          }\r\n        })\r\n        return passFilter;\r\n      });\r\n    }\r\n\r\n    if (!filteredItems.length) {\r\n      return <div className=\"app-error\">Nothing to see here. Result is empty.</div>;\r\n    }\r\n\r\n    const getNextPage = paginationConfig ? () => {\r\n      if(isQueryPagination(paginationConfig)) {\r\n        if(pagination && !isQueryPaginationState(pagination)) {\r\n          throw new Error('unexpected pagination source ' + pagination.source)\r\n        }\r\n        if (pagination?.page && queryParams.length > 0) {\r\n          const newPage = pagination?.page + 1;\r\n          const updatedParams = queryParams.map((param) => {\r\n            if (param.name === paginationConfig.params?.page?.name) {\r\n              return {\r\n                ...param,\r\n                value: newPage\r\n              }\r\n            }\r\n            return param;\r\n          });\r\n          submitQueryParams(updatedParams);\r\n        }\r\n      } else if(isBodyPagination(paginationConfig)) {\r\n        if(pagination && !isBodyPaginationState(pagination)) {\r\n          throw new Error('unexpected pagination source ' + pagination.source)\r\n        }\r\n        if(!getAllConfig || !pagination?.next) {\r\n          return;\r\n        }\r\n        const { requestHeaders, actualMethod, dataPath, sortBy, dataTransform } = getAllConfig;\r\n        fetchPageData(\r\n          {\r\n            actualMethod: actualMethod,\r\n            url: pagination.next,\r\n            requestHeaders: requestHeaders,\r\n            dataPath: dataPath,\r\n            dataTransform: dataTransform,\r\n            sortBy: sortBy\r\n          }\r\n        )\r\n      } else {\r\n        throw new Error('unrecognized pagination source');\r\n      }\r\n    } : null;\r\n\r\n    const getPreviousPage = paginationConfig ? () => {\r\n      if(isQueryPagination(paginationConfig)) {\r\n        if(pagination && !isQueryPaginationState(pagination)) {\r\n          throw new Error('unexpected pagination source ' + pagination.source)\r\n        }\r\n        if (pagination?.page && pagination.page > 1 && queryParams.length > 0) {\r\n          const newPage = pagination?.page - 1;\r\n          const updatedParams = queryParams.map((param) => {\r\n            if (param.name === paginationConfig.params?.page?.name) {\r\n              return {\r\n                ...param,\r\n                value: newPage\r\n              }\r\n            }\r\n            return param;\r\n          });\r\n          submitQueryParams(updatedParams);\r\n        }\r\n      } else if(isBodyPagination(paginationConfig)) {\r\n        if(pagination && !isBodyPaginationState(pagination)) {\r\n          throw new Error('unexpected pagination source ' + pagination.source)\r\n        }\r\n        if(!getAllConfig || !pagination?.previous) {\r\n          return;\r\n        }\r\n        const { requestHeaders, actualMethod, dataPath, sortBy, dataTransform } = getAllConfig;\r\n        fetchPageData(\r\n          {\r\n            actualMethod: actualMethod,\r\n            url: pagination.previous,\r\n            requestHeaders: requestHeaders,\r\n            dataPath: dataPath,\r\n            dataTransform: dataTransform,\r\n            sortBy: sortBy\r\n          }\r\n        )\r\n      } else {\r\n        throw new Error('unrecognized pagination source');\r\n      }\r\n    } : null;\r\n\r\n    const callbacks = {\r\n      delete: deleteConfig ? deleteItem : null,\r\n      put: putConfig ? openEditPopup : null,\r\n      action: customActions.length ? openCustomActionPopup : () => { },\r\n      getNextPage,\r\n      getPreviousPage,\r\n    };\r\n\r\n    if (getAllConfig?.display.type === 'cards') {\r\n      return (\r\n        <Cards\r\n          pagination={pagination}\r\n          callbacks={callbacks}\r\n          fields={fields}\r\n          items={filteredItems}\r\n          customActions={customActions}\r\n          customLabels={customLabels}\r\n        />\r\n      );\r\n    }\r\n\r\n    return (\r\n      <Table\r\n        pagination={pagination}\r\n        callbacks={callbacks}\r\n        fields={fields}\r\n        items={filteredItems}\r\n        customActions={customActions}\r\n        customLabels={customLabels}\r\n      />\r\n    );\r\n  }\r\n\r\n  function renderPaginationStateLabel() {\r\n    if (loading || !items.length) {\r\n      return;\r\n    }\r\n    \r\n    if(!pagination || isQueryPaginationState(pagination)) {\r\n      const currentCountFrom = (((pagination?.page || 1) - 1) * (pagination?.limit || 10)) + 1;\r\n      const currentCountTo = currentCountFrom + items.length - 1;\r\n      let label: string = `Showing results ${currentCountFrom}-${currentCountTo} out of ${pagination?.total} items`;\r\n\r\n      if (pagination?.type === 'infinite-scroll') {\r\n        label = `Showing ${pagination?.total} items`;\r\n      }\r\n\r\n      if (customLabels?.pagination?.itemsCount) {\r\n        label = customLabels?.pagination?.itemsCount\r\n                .replace(':currentCountFrom', currentCountFrom as any)\r\n                .replace(':currentCountTo', currentCountFrom as any)\r\n                .replace(':totalCount', pagination?.total as any);\r\n      }\r\n\r\n      return (\r\n        <p className=\"center pagination-state\">\r\n          {label}\r\n        </p>\r\n      );\r\n    }\r\n    if(isBodyPaginationState(pagination)) {\r\n      // TODO: extract start end end in a meaningful manner from the API\r\n      // this is not something that id based pagination APIs support generally\r\n      let label: string = `Total Results: ${pagination?.total}`;\r\n      if (pagination?.type === 'infinite-scroll') {\r\n        label = `Showing ${pagination?.total} items`;\r\n      }\r\n\r\n      if (customLabels?.pagination?.itemsCount) {\r\n        label = customLabels?.pagination?.itemsCount\r\n                .replace(':totalCount', pagination?.total as any);\r\n      }\r\n\r\n      return (\r\n        <p className=\"center pagination-state\">\r\n          {label}\r\n        </p>\r\n      );\r\n    }\r\n  }\r\n\r\n  function renderPageContent() {\r\n    const fields = getAllConfig?.fields || getAllConfig?.display?.fields || [];\r\n    const fieldsToFilter = fields.filter((field) => (field.filterable)).map((field) => field.name);\r\n\r\n    return (\r\n      <React.Fragment>\r\n        <QueryParams\r\n          initialParams={queryParams}\r\n          paginationConfig={paginationConfig}\r\n          submitCallback={submitQueryParams}\r\n        />\r\n        {\r\n          fieldsToFilter.length > 0 &&\r\n          <FilterField onChange={setFilter} />\r\n        }\r\n        {\r\n          pagination?.total &&\r\n          renderPaginationStateLabel()\r\n        }\r\n        {\r\n          error ?\r\n          <div className=\"app-error\">{error}</div> :\r\n          renderItemsUI()\r\n        }\r\n      </React.Fragment>\r\n    )\r\n  }\r\n\r\n  useEffect(() => {\r\n    const nextActivePage: IConfigPage | null = context?.config?.pages?.filter((p, pIdx) => p.id === page || (pIdx + 1) === parseInt(page || ''))[0] || null;\r\n    context.setActivePage(nextActivePage);\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [page]);\r\n\r\n  useEffect(() => {\r\n    const { initQueryParams, initialPagination } = buildInitQueryParamsAndPaginationState(getAllConfig?.queryParams || [], paginationConfig);\r\n\r\n    setItems([]);\r\n    setQueryParams(extractQueryParams(initQueryParams));\r\n    setPagination(initialPagination);\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [activePage]);\r\n\r\n  useEffect(() => {\r\n    // Load data when query params \r\n    getAllRequest();\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [queryParams]);\r\n\r\n  return (\r\n    <div className=\"app-page\">\r\n      <header className=\"app-page-header\">\r\n        <hgroup>\r\n          <h2>{activePage?.name}</h2>\r\n          {\r\n            activePage?.description &&\r\n            <h4>{activePage?.description}</h4>\r\n          }\r\n        </hgroup>\r\n        {\r\n          postConfig &&\r\n          <Button className=\"add-item\" color=\"green\" onClick={() => setOpenedPopup({ type: 'add', title: addItemFormTitle, config: postConfig, submitCallback: addItem })}>{addItemLabel}</Button>\r\n        }\r\n      </header>\r\n      <main className=\"app-page-content\">\r\n        {renderPageContent()}\r\n      </main>\r\n      {\r\n        openedPopup &&\r\n        <FormPopup\r\n          title={openedPopup.title}\r\n          closeCallback={closeFormPopup}\r\n          submitCallback={openedPopup.submitCallback}\r\n          fields={openedPopup.config?.fields || []}\r\n          rawData={openedPopup.rawData}\r\n          getSingleConfig={openedPopup.getSingleConfig}\r\n          methodConfig={openedPopup.config}\r\n        />\r\n      }\r\n    </div>\r\n  );\r\n}\r\n\r\nexport const Page = withAppContext(PageComp);\r\n","import React, { useState } from 'react';\r\nimport { NavLink } from 'react-router-dom';\r\n\r\nimport { IAppContext } from '../app.context';\r\nimport { withAppContext } from '../withContext/withContext.comp';\r\nimport { Button } from '../button/button.comp';\r\n\r\nimport './navigation.scss';\r\n\r\ninterface IProps {\r\n  context: IAppContext\r\n}\r\n\r\nconst NavigationComp = ({ context: { config } }: IProps) => {\r\n  const [isOpened, setIsOpened] = useState<boolean>(false);\r\n\r\n  return (\r\n    <nav className=\"app-nav\">\r\n      <Button className=\"app-nav-opener\" onClick={() => setIsOpened(!isOpened)}>\r\n        {\r\n          isOpened ? \r\n          <i className=\"fa fa-times\" aria-hidden=\"true\"></i> : \r\n          <i className=\"fa fa-bars\" aria-hidden=\"true\"></i>\r\n        }\r\n      </Button>\r\n\r\n      <div className={`app-nav-wrapper ${isOpened ? 'opened' : ''}`}>\r\n        <div className=\"app-nav-links\">\r\n          {\r\n            (config?.pages || []).map((page, idx) => (\r\n              <NavLink to={`/${page.id || idx + 1}`} activeClassName=\"active\" key={`page_${idx}`} onClick={() => setIsOpened(false)}>{page.name}</NavLink>\r\n            ))\r\n          }\r\n        </div>\r\n      </div>\r\n    </nav>\r\n  );\r\n}\r\n\r\nexport const Navigation = withAppContext(NavigationComp);","import React from 'react';\r\nimport { ICustomStyles } from '../../common/models/config.model';\r\n\r\ninterface IProps {\r\n  styles: ICustomStyles\r\n}\r\n\r\nexport const CustomStyles = ({ styles }: IProps) => {\r\n  const cssVars = styles.vars || {};\r\n  const arr = [];\r\n  \r\n  for (const key in cssVars) {\r\n    arr.push(`--${key}: ${(cssVars as any)[key]}`);\r\n  }\r\n\r\n  return (\r\n    <style dangerouslySetInnerHTML={{ __html: `\r\n      :root {\r\n        ${arr.join(';')}\r\n      }\r\n    ` }}>\r\n    </style>\r\n  );\r\n};","/* eslint-disable */\r\n// WARNING: DO NOT EDIT. This file is automatically generated by AWS Amplify. It will be overwritten.\r\n\r\nconst awsmobile = {\r\n    \"aws_project_region\": \"us-east-2\",\r\n    \"aws_cognito_identity_pool_id\": \"us-east-2:6152ab19-d54f-4b97-bca8-3b95590e97e5\",\r\n    \"aws_cognito_region\": \"us-east-2\",\r\n    \"aws_user_pools_id\": \"us-east-2_pwie9NkaL\",\r\n    \"aws_user_pools_web_client_id\": \"7o56mhqpa9dhgb2o6u0lnket23\",\r\n    \"oauth\": {}\r\n};\r\n\r\n\r\nexport default awsmobile;\r\n","import React, { useEffect, useState } from 'react';\r\nimport { HashRouter as Router, Route, Switch, Redirect } from 'react-router-dom';\r\nimport { ToastContainer, toast } from 'react-toastify';\r\nimport ConfigService from '../services/config.service';\r\nimport { IConfig, IConfigPage } from '../common/models/config.model';\r\nimport { Page } from '../components/page/page.comp';\r\nimport { Navigation } from '../components/navigation/navigation.comp';\r\nimport { AppContext } from './app.context';\r\nimport HttpService from '../services/http.service';\r\nimport { CustomStyles } from './customStyles/customStyles.comp';\r\n\r\nimport './app.scss';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\n\r\nimport { AmplifyAuthenticator, AmplifySignOut, AmplifySignUp, AmplifySignIn } from '@aws-amplify/ui-react';\r\n\r\nimport Amplify from \"aws-amplify\";\r\nimport awsExports from \"./aws-exports\";\r\nAmplify.configure(awsExports);\r\n\r\nconst httpService = new HttpService();\r\nconst defaultAppName: string = 'RESTool App';\r\n\r\nfunction changeFavicon(src: string) {\r\n  const link = document.createElement('link');\r\n  const oldLink = document.getElementById('favicon');\r\n  link.id = 'favicon';\r\n  link.rel = 'shortcut icon';\r\n  link.href = src;\r\n  if (oldLink) {\r\n   document.head.removeChild(oldLink);\r\n  }\r\n  document.head.appendChild(link);\r\n }\r\n\r\nfunction App() {\r\n  const [firstLoad, setFirstLoad] = useState<boolean>(true);\r\n  const [config, setConfig] = useState<IConfig | null>(null);\r\n  const [activePage, setActivePage] = useState<IConfigPage | null>(config?.pages?.[0] || null);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const appName: string = config?.name || defaultAppName;\r\n  \r\n  async function loadConfig(url?: string): Promise<void> {\r\n    try {\r\n      const windowConfig = (window as any).RESTool?.config;\r\n      let remoteConfig: IConfig; \r\n      // Try to load config from window object first\r\n      if (!url && windowConfig) {\r\n        remoteConfig = Object.assign({}, windowConfig, {});\r\n      } else {\r\n        remoteConfig = url ? await ConfigService.getRemoteConfig(url) : await ConfigService.loadDefaultConfig();\r\n      }\r\n\r\n      // Setting global config for httpService\r\n      httpService.baseUrl = remoteConfig.baseUrl || '';\r\n      httpService.errorMessageDataPath = remoteConfig.errorMessageDataPath || '';\r\n      httpService.unauthorizedRedirectUrl = remoteConfig.unauthorizedRedirectUrl || '';\r\n      httpService.requestHeaders = remoteConfig.requestHeaders || {};\r\n      document.title = remoteConfig.name || defaultAppName;\r\n\r\n      if (remoteConfig?.favicon) {\r\n        changeFavicon(remoteConfig.favicon);\r\n      }\r\n\r\n      if (remoteConfig?.remoteUrl) {\r\n        return await loadConfig(remoteConfig.remoteUrl);\r\n      }\r\n\r\n      setConfig(remoteConfig);\r\n    } catch (e) {\r\n      console.error('Could not load config file', e);\r\n    }\r\n\r\n    setFirstLoad(false);\r\n  }\r\n\r\n  function scrollToTop(scrollDuration: number = 250) {\r\n    var cosParameter = window.scrollY / 2,\r\n    scrollCount = 0,\r\n    oldTimestamp = performance.now();\r\n\r\n    function step (newTimestamp: number) {\r\n      scrollCount += Math.PI / (scrollDuration / (newTimestamp - oldTimestamp));\r\n\r\n      if (scrollCount >= Math.PI) {\r\n        window.scrollTo(0, 0);\r\n      }\r\n\r\n      if (window.scrollY === 0) {\r\n        return;\r\n      }\r\n\r\n      window.scrollTo(0, Math.round(cosParameter + cosParameter * Math.cos(scrollCount)));\r\n      oldTimestamp = newTimestamp;\r\n      window.requestAnimationFrame(step);\r\n    }\r\n\r\n    window.requestAnimationFrame(step);\r\n  }\r\n\r\n  useEffect(() => {\r\n    loadConfig();\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const { isValid, errorMessage } = ConfigService.validateConfig(config);\r\n\r\n    if (!isValid) {\r\n      setError(errorMessage);\r\n      toast.error(errorMessage);\r\n      return;\r\n    }\r\n  }, [config]);\r\n\r\n  return (\r\n    <AmplifyAuthenticator usernameAlias=\"email\">\r\n      <AmplifySignUp\r\n\r\n        slot=\"sign-up\"\r\n        usernameAlias=\"email\"\r\n\r\n        formFields={[\r\n          {\r\n            type: \"email\",\r\n            label: \"Email Address\",\r\n            placeholder: \"Enter your email address\",\r\n            required: true,\r\n          },\r\n          {\r\n            type: \"password\",\r\n            label: \"Password\",\r\n            placeholder: \"Enter your password\",\r\n            required: true,\r\n          },\r\n          {\r\n            type: \"phone_number\",\r\n            label: \"Phone number\",\r\n            placeholder: \"Enter your phone number\",\r\n            required: false,\r\n          }\r\n        ]} \r\n      />\r\n      <AmplifySignIn slot=\"sign-in\" hideSignUp usernameAlias=\"email\" />\r\n    <div className=\"restool-app\">\r\n      {\r\n        !config ?\r\n        <div className=\"app-error\">\r\n          {firstLoad ? 'Loading Configuration...' : 'Could not find config file.'}\r\n        </div> :\r\n        <AppContext.Provider value={{ config, activePage, setActivePage, error, setError, httpService }}>\r\n          {\r\n            config.customStyles &&\r\n            <CustomStyles\r\n              styles={config.customStyles}\r\n            />\r\n          }\r\n          <Router>\r\n            <aside>\r\n\r\n              <h1 title={appName} onClick={() => scrollToTop()}>{appName}</h1>\r\n              <AmplifySignOut />\r\n              {\r\n                <Navigation />\r\n              }\r\n            </aside>\r\n            {\r\n              config &&\r\n              <Switch>\r\n                <Route exact path=\"/:page\" component={Page} />\r\n                <Redirect path=\"/\" to={`/${config?.pages?.[0]?.id || '1'}`} />\r\n              </Switch>\r\n            }\r\n            <ToastContainer\r\n              position={toast.POSITION.TOP_CENTER}\r\n              autoClose={4000}\r\n              draggable={false}\r\n            />\r\n          </Router>\r\n        </AppContext.Provider>\r\n\r\n      }\r\n    </div>\r\n    </AmplifyAuthenticator>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config: any) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl: string, config: any) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl: string, config: any) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' }\r\n  })\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './components/app';\r\nimport * as serviceWorker from './serviceWorker';\r\n\r\nimport './index.scss';\r\n\r\n\r\n\r\nReactDOM.render(<App />, document.getElementById('root'));\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}